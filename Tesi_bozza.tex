\documentclass[12pt,a4paper,oneside]{book}
\linespread{1.5}
\usepackage{graphicx}
\usepackage[hang,small,bf]{caption}
\usepackage{subcaption}
\usepackage{wrapfig}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage[linesnumbered,lined,boxed,commentsnumbered]{algorithm2e}
\usepackage{bytefield}
\usepackage{epstopdf}
\usepackage[italian]{babel}
\usepackage{caption}

\author{Luca Olivieri}
\title{Source Contact Graph Routing applicato ad una rete DTN nanosatellitare}

\bibliographystyle{IEEEtran}

\pagestyle{fancy}
\addtolength{\headwidth}{\marginparsep}
\addtolength{\headwidth}{\marginparwidth}
\renewcommand{\headrulewidth}{0.6pt}
\renewcommand{\footrulewidth}{0.6pt}
\renewcommand{\chaptermark}[1]{\markboth{ }{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyfoot{}
\fancyfoot[L]{Università degli Studi di Genova}
\fancyfoot[R]{\thepage}
\renewcommand{\captionfont}{\slshape}

\begin{document}
	
	\input{copertina}
	
	\clearpage
	
	\chapter*{Ringraziamenti}	
	\textit{Ai miei nonni e ai miei genitori per avermi sempre sostenuto.}
	\clearpage
	
	\chapter*{Estratto}
	{ \it Il presente lavoro si pone in una ricerca con lo scopo di fornire connettività Internet a basso costo per zone rurali irraggiungibili da connessioni convenzionali.
	
	L'architettura proposta si basa sul concetto di rete DTN, cioè tollerante ai ritardi e alle disconnessioni, applicato ad uno scenario di comunicazione satellitare. I satelliti in questione fanno parte di una realtà recente nel campo, i nanosatelliti, che promettono il vantaggio di costi di progettazione e dispiegamento contenuti.
	
	La natura deterministica del movimento dei satelliti ci porta a conoscere la disposizione dei nodi della rete in istanti futuri, permettendo la conoscenza a priori dei possibili contatti.
	Basandosi su questi dati questo lavoro propone un algoritmo di routing in grado di produrre un percorso per i dati direttamente alla sorgente. Questo algoritmo è chiamato SCGR (Source Contact Graph Routing) e deriva dal CGR proposto dalla NASA.
	
	Tramite il simulatore di reti ns-3 è stato possibile confermare la validità di questa proposta.}
	\clearpage
	
	\tableofcontents
	
	
	
	\chapter*{Introduzione}
	Deserti, catene montuose, atolli oceanici, steppe innevate e foreste amazzoniche sono alcuni esempi di quello che in questo ambito di ricerca sarà definito come \textbf{zone rurale}. 
	
	La scopo di questa ricerca è poter fornire un servizio Internet a questi angoli del pianeta dalle condizioni avverse, non necessariamente solo dal punto di vista meteorologico o morfologico ma anche dal punto di vista sociale e politico. Zone come queste non sono raggiungibili tramite mezzi terrestri come reti cablate o ponti radio, i costi e le asperità tecniche da affrontare non sarebbero giustificabili se rapportate con il bacino di utenza che andrebbero a servire. 
	
	La soluzione proposta è la creazione di una rete satellitare dalla copertura globale, con particolare attenzione alla sostenibilità economica. Una rete satellitare è completamente indifferente alle condizioni fisiche o politiche del territorio sottostante, potendo così offrire una valida soluzione non ad una zona rurale in particolare ma a tutte. Per il tipo di utenza che si va a raggiungere e per il diretto confronto con le alternative commerciali già esistenti è stato necessario prestare particolare attenzione al costo di un'infrastruttura simile. Il una rete satellitare l'investimento più oneroso è rappresentato appunto dai satelliti, non solo la loro progettazione, costruzione e testing, ma anche il loro lancio in orbita e mantenimento negli anni. La scelta della piattaforma orbitale è ricaduta quindi sui \textbf{nanosatelliti}, una realtà piuttosto recente che promette interessanti possibilità dal punto di vista dei costi essendo una famiglia di satelliti dal peso e dalle dimensioni estremamente ridotte e standardizzate, abbattendo così i costi di sviluppo e costruzione, permettendo lanci estremamente economici potendo essere imbarcati come payload secondario. 
	
	Una rete satellitare rappresenta comunque una notevole sfida ingegneristica, nell'ambito di questo lavoro ci si soffermerà sull'aspetto protocollare, non essendo banale supportare una varietà così eterogenea di nodi e collegamenti. I sistemi satellitari costituiscono già di per sé una notevole complicazione a più livelli dello stack protocollare, soffermandoci su quelli di trasporto e superiori i principali problemi stanno nelle lunghe latenze e disturbi del canale. Inoltre una connettività Internet convenzionale impone che esista una connessione diretta e continua tra sorgente e destinazione, condizione non sempre assicurabile in questo contesto. 
	
	La risposta in questo ambito è il \textbf{Delay Tolerant Networking} (DTN), basato sull'introduzione di un layer protocollare aggiuntivo, il Bundle Layer, implementando il Bundle Protocol (BP). Il Bundle Layer introduce il supporto per la memorizzazione a lungo termine ai nodi intermedi, permettendo di reagire efficacemente a disconnessioni e ritardi. La Protocol Data Unit DTN è chiamata Bundle ed è generata al nodo DTN sorgente incapsulando un pacchetto di livello applicativo. Il routing del Bundle è attuato solo ai nodi DTN intermedi. 	
	
	Il routing è il principale punto approfondito in questo lavoro, proponendo per la rete in questione un'innovativa soluzione che sfrutta efficacemente la natura deterministica della rete. Sfruttando la conoscenza pregressa del moto dei satelliti, l'algoritmo di \textbf{Source Contact Graph Routing} crea una pletora di diversi possibili percorsi direttamente alla sorgente. Inoltre logica deterministica viene espressa appieno tenendo conto dell'impatto sulla rete dei percorsi creati, gestendo con efficacia possibili saturazioni e conflitti. 
	
	Infine questa proposta è implementata in ns-3, un simulatore di reti, e testata per verificarne la fattibilità e l'efficacia.
	
	Il presente elaborato è strutturato come segue.
	\begin{itemize}
		\item \textbf{Capitolo 1} introduce le reti DTN, motivando la loro necessità esponendo i limiti delle reti convenzionali in condizioni estreme ed espone i dettagli architetturali insieme alle sue caratteristiche peculiari.
		\item \textbf{Capitolo 2} elenca e confronta le diverse piattaforme satellitari dando così un contesto alla motivazione della nostra rete nanosatellitare. Viene poi definita l'architettura di rete e il suo funzionamento, confrontando infine la nostra proposta con le alternative disponibili e lo stato attuale della ricerca.
		\item \textbf{Capitolo 3} riguarda il nuovo approccio all'instradamento introdotto in questo lavoro, illustrando come è sfruttata la natura deterministica della rete e infine esponendo il funzionamento dell'algoritmo proposto.
		\item \textbf{Capitolo 4} raccoglie i risultati delle simulazioni effettuate dopo aver esposto la piattaforma di simulazione e i parametri scelti.
		\item \textbf{Capitolo 5} propone le conclusioni ed una serie di possibili sviluppi degli argomenti proposti.
	\end{itemize}
	
	\chapter{Delay Tolerant Networks}
		
		\section{Origini e idea generale}
		
		Le reti convenzionali mal si adattano a condizioni ambientali estreme e questo argomento è un campo attivo di ricerca. I principali limiti dei dispositivi operanti in queste circostanze riguardano la capacità di trasmissione limitata, la scarsa disponibilità di energia e memoria, il movimento e in particolare lunghi ritardi e connettività intermittente. Queste ultime limitazioni caratterizzeranno principalmente lo scenario considerato in questo lavoro, incentrato su reti di tipo satellitare dove il costante movimento orbitale impone una connettività intermittente e la notevole distanza tra i nodi risente del limite della velocità di propagazione della luce. La comune pila ISO/OSI male si adatta a queste condizioni, soffrendo a più livelli delle peculiari caratteristiche della rete. In particolare la combinazione TCP/IP è resa inutilizzabile da questi impedimenti e tale argomento verrà approfondito nel capitolo \ref{limProt}. Varie soluzioni sono state proposte per affrontare questo problema, tra cui i Performance Enhancing Proxies (PEPs) \cite{borderperformance} che però, oltre a non rappresentare una vera soluzione, creano problemi di incompatibilità con gli attuali protocolli di sicurezza.
		
		Una valida soluzione alternativa è il paradigma DTN \cite{caini2011delay}, il quale prevede l'introduzione di un layer aggiuntivo, chiamato Bundle Layer (BL)\cite{cerf2007rfc}, e del corrispondente protocollo, chiamato Bundle Protocol (BP)\cite{scott2007bundle}, sovrastante il livello di trasporto (TCP, UDP, etc\dots) o il livello fisico (Bluetooth, Ethernet, \dots). Questa aggiunta permette di affrontare interruzioni del canale e lunghi ritardi garantendo la memorizzazione dei dati anche per lunghi periodi nei nodi intermedi, in attesa che il canale torni disponibile. Dividendo il percorso end-to-end in più salti di tipo DTN si estende il concetto di TCP-splitting già utilizzato sui PEP, permettendo di usare protocolli specializzati necessari, ad esempio, sui link satellitari.
		
		\section{Limitazioni dei protocolli convenzionali in condizioni estreme} \label{limProt}
		
		Per meglio comprendere le limitazioni che i protocolli standard di Internet hanno in condizioni di rete precarie verrà proposto un esempio. Consideriamo uno scenario composto da un centro di ricerca, un complesso di antenne e un satellite in orbita attorno a Marte. La situazione è schematizzata in figura \ref{fig:scenariomars}. 
		
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.5]{./img/scenariouse}
			\caption{Scenario di collegamento tra un laboratorio terrestre e una stazione meteorologica su Marte.}
			\label{fig:scenariomars}
		\end{figure}
		
		Il percorso che divide il laboratorio dalle antenne per lo spazio profondo è una rete Internet convenzionale, caratterizzata da:
		\begin{itemize}
			\item basse latenze, nell'ordine dei millisecondi;
			\item alte velocità, fino a qualche Gb/s;
			\item bassa probabilità di errore;
			\item comunicazione bidirezionale;
			\item connettività sorgente-destinazione continua;
		\end{itemize}
		Quindi in questo tratto lo stack TCP/IP è usato nelle sue condizioni nominali, offrendo tutti i servizi che conosciamo come frammentazione e ritrasmissione automatica. 
		
		Analizzando invece il secondo tratto di comunicazione, tra il complesso di antenne e l'orbiter attorno a Marte, ci accorgiamo che la situazione è ben diversa:
		\begin{itemize}
			\item lunghe latenze di propagazione, nell'ordine di minuti (figura \ref{fig:rtt});
			\item basse velocità, tipicamente qualche decina di Kb/s;
			\item interruzioni a causa di interferenze;
			\item connessione deterministicamente intermittente;
		\end{itemize}
		
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.5]{./img/rtt}
			\caption{Latenze di sola andata espresse in scala logaritmica.}
			\label{fig:rtt}
		\end{figure}
		
		Le lunghe latenze (figura \ref{fig:rtt}) rendono inutilizzabile il meccanismo di ritrasmissione del TCP eccedendo abbondantemente i timeout propri del protocollo. Inoltre il meccanismo di handshake a tre stadi si protrarrebbe fino ad occupare gran parte dell'opportunità di contatto. Protocolli alternativi al TCP sono l'UDP, che però non offre meccanismi di ritrasmissione, e altri più esotici che comunque non produrrebbero risultati soddisfacenti per le stesse ragioni del TCP.
		
		Risulta quindi che non è possibile usare lo stesso stack di protocolli su tutti i nodi della rete, pur rimanendo nella necessità di avere un meccanismo di ritrasmissione automatico (ARQ). 

		Infine l'ultimo impedimento è la connessione intermittente che dai normali sistemi di routing è elaborata come una totale disconnessione dovuta alla mancanza di un percorso attivo tra sorgente e destinazione. Il nodo è quindi considerato non più presente nella rete piuttosto che temporaneamente disconnesso e di conseguenza un tipico calcolo di percorso basato su IP non lo tiene più in considerazione.
		
		
		\section{Architettura DTN}		
		
		L'archittettura DTN, raffigurata in figura \ref{fig:architettura} è basata sull'introduzione di un nuovo strato protocollare a livello di trasporto o anche a livelli più bassi chiamato Bundle Protocol (BP). Il punto essenziale è dotare i nodi della capacità di gestire ritardi e disconnessioni, permettendo di memorizzare i dati localmente in attesa dell'opportunità per inoltrarli al prossimo nodo e di garantire una comunicazione attraverso reti eterogenee, cioè basate su differenti protocolli e tecnologie. 
		
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.5]{./img/architettura}
			\caption{Architettura e stack DTN.}
			\label{fig:architettura}
		\end{figure}
				
		Il Bundle Protocol è in grado di interfacciarsi con i livelli inferiori, generalmente di trasporto, per mezzo di Convergence Layer Adapters (CLAs). Nel tempo sono stati definiti vari CLA, a cominciare sia dai protocolli di trasporto più comuni come TCP\cite{demmer2014delay} e UDP\cite{kruse2008udp}, che più specifici, come il Licklider Transmossion Protocol (LTP) \cite{ramadas2008rfc}\cite{burleigh2013delay}, passando poi anche nella seconda versione\cite{delay2012dtn2} (DTN2) a protocolli di livello datalink come Bluetooth ed Ethernet. 
		In combinazione con il BP, ogni nodo può utilizzare il CLA più adatto per l'inoltro successivo. 
		
		L'uso del Bundle Protocol è guidato da alcuni principi di design a livello applicativo che contribuiscono ad ottenere migliori risultati:
		\begin{itemize}
			\item gli applicativi sono tenuti a minimizzare gli scambi di andata e ritorno;
			\item gli applicativi dovrebbero essere in grado di gestire interruzioni improvvise mantenendo il trasferimento attivo;
			\item gli applicativi sono tenuti a specificare il tempo di validità dei dati e loro importanza relativa.
		\end{itemize}	
		L'architettura DTN offre le seguenti caratteristiche:
		
		\begin{itemize}
			\item La capacità di agire come strato legante per tecnologie eterogenee, come reti wireless {\it ad hoc} di sensori, WLAN, link satellitari, Internet, ecc. Ciascun nodo potrà implementare differenti CLA per adattarsi ai molteplici protocolli a cui una rete disomogenea può appoggiarsi. In hop successivi è anche possibile appoggiarsi a diverse varianti dello stesso protocollo utilizzando lo stesso CLA. 
			
			\item Possibilità di archiviazione nei nodi intermedi. Questa è un'importante differenza dallo stack TCP/IP tradizionale, dove, in presenza di reti convenzionali che assumono connettività persistente e brevi ritardi, i router intermedi trattengono l'informazione solo per brevi periodi lasciando la memorizzazione a lungo termine solo ai nodi finali. Questo è motivato dal fatto che avendo a disposizione una connessione stabile si suppone che l'informazione possa essere recuperata direttamente dalla fonte. Tutto ciò ovviamente non è possibile nelle reti in condizioni estreme e, nell'ottica di riuscire ad affrontare i lunghi tempi di andata e ritorno come anche le interruzioni di canale, nelle reti DTN è necessario che i nodi intermedi abbiano la possibilità di memorizzare a lungo termine l'informazione. Questo contribuisce alla robustezza dell'architettura in presenza di disturbi, disconnessioni e problemi tecnici temporanei come ad esempio riavvi del nodo. Da un altro punto di vista però la memorizzazione a lungo termine può portare a congestionare i nodi e all'esaurimento dello spazio di memoria disponibile, questa è una conseguenza da dover considerare e gestire.
			
			\item {\it Custody Transfer:} tenendo a mente il contesto generale di una rete prona a non avere una connessione persistente tra sorgente e destinazione, l'architettura DTN stabilisce che il nodo avente i dati è responsabile per questi ultimi. Quindi eventuali ritrasmissioni che nelle reti convenzionali sono gestite dai nodi finali qui sono gestite da ogni singolo nodo intermedio, a cui è stata temporaneamente trasferita la custodia del dato.
			
			\item Late Binding: ogni nodo della rete DTN è identificato da un Endpoint Identifier (EID), espresso sintatticamente come un Uniform Resource Identifier (URI) \cite{berners2005rfc}. Nel Bundle Protocol non esiste il concetto di indirizzo, l'instradamento è basato puramente su EID. Quindi la risoluzione DNS di un nome destinazione può essere posposta (Late Binding) fino a che non si entra nella porzione di rete in grado di compiere interamente tale risoluzione. Questa è una caratteristica che permette di aggirare la mancanza di specifiche strutture come un DNS aggiornato in reti isolate.
			
			\item Routing: deve considerare priorità diverse dalle reti tradizionali, come ad esempio la capacità di memorizzazione e la gestione dell'energia. Certamente il tempo di consegna rimane un aspetto importante, ma in questo contesto può essere soggetto a compromessi. Infine il routing deve gestire il concetto di contatto, che si può definire come intervallo di tempo nel quale due nodi possono scambiarsi una certa quantità di dati. La  quantificazione di tutti questi aspetti non è banale.
			
			\item Frammentazione: può essere di due tipi, proattiva e reattiva. La prima è adatta in situazioni dove la connessione è pianifica o deterministica (tempo di contatto) e si è a conoscenza della quantità di dati scambiabili per ogni finestra temporale (volume di contatto). Quindi quando la connessione è conosciuta a priori, come ad esempio in comunicazioni spaziali, è possibile frammentare grossi bundle pianificando con precisione i trasferimenti compatibilmente con il volume di contatto disponibile.
			Al contrario la frammentazione reattiva entra in gioco a posteriori, quando ad esempio la connessione viene interrotta frequentemente ed inaspettatamente e sono necessarie ritrasmissioni.
			
		\end{itemize}
		
		
		\section{DTN come evoluzione del TCP splitting}
		L'accesso a Internet tramite TCP/IP ha portato allo sviluppo dei PEP e in generale di {\it protocol boosters } per adattare questo stack in reti eterogenee. Il loro ruolo modifica attivamente il flusso sorgente-destinazione per adattare ai nodi TCP/IP i tratti con prestazioni povere, di fatto inducendoli a credere di avere a che fare con connessioni a prestazioni migliori. Gli esempi proposti saranno incentrati sulla comunicazione satellitare, essendo questa uno scenario di tipico utilizzo dei PEP. Il link satellitare infatti presenta forti latenze e altre peculiarità che rendono necessari protocolli specializzati come LTP. I PEP o alternativamente le DTN si occupano di spezzare la connessione a livello di trasporto.
		%non ho capito un accidente dei principi di fate sharing
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.7]{./img/peptypes}
			\caption{Confronto tra le architetture PEP e DTN. (a) PEP distribuiti; (b) PEP integrati; (c) rete DTN.}
			\label{fig:pep}
		\end{figure}		
		
		Principalmente sono possibili due configurazioni diverse di PEP (figura \ref{fig:pep}): distribuiti ed integrati. I primi sono presenti da entrambi i lati del link satellitare, i secondi invece solo da un lato. 
		%Immagine presa dal vostro paper al riguardo
		La tipologia più comune di PEP effettua il TCP splitting\cite{caini2007pepsal}, dividendo la connessione a livello di trasporto in due parti. Nei PEP distribuiti quindi si hanno tre connessioni diverse, dove la prima e l'ultima generalmente utilizzano TCP standard, mentre la seconda sul link satellitare un differente protocollo.
		Il corrispondente DTN è simile a quest'ultima configurazione (Figura \ref{fig:clastack}).
		Nei PEP integrati invece la connessione è spezzata in sole due parti, la prima con su rete cablata con TCP convenzionale e la seconda con un protocollo specializzato ma comunque compatibile con il TCP standard (Figura \ref{fig:pepstack}).
		%Immagine con i due differenti stack
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.45]{./img/pep}
			\caption{Stack protocollare PEP integrato.}
			\label{fig:pepstack}
		\end{figure}			

		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.45]{./img/cla}
			\caption{Stack protocollare DTN.}
			\label{fig:clastack}
		\end{figure}			

				
		Riassumendo, le principali similarità e differenze sono:
		\begin{itemize}
			\item entrambi hanno due connessioni a livello di trasporto, una cablata e l'altra satellitare;
			\item entrambi possono usare una variante del TCP specializzata per la connessione satellitare;
			\item la soluzione DTN richiede che i nodi abbiano installato il BP;
			\item il TCP splitting viola il principio di connessione end to end, perché i PEP agiscono sia al livello applicativo che di trasporto. Nelle DTN questo problema è superato perché il ruolo del TCP è ridefinito: ogni hop DTN è una connessione a sé stante.
 		\end{itemize}
		

	
	\chapter{Nanosatellite DTN Network}
		
		\section{Framework}	

		L'idea generale su cui si basa questo lavoro è una costellazione di nanosatelliti operanti con il paradigma DTN. Inizialmente sviluppata a partire da uno scenario mono orbita \cite{cello2014hot}, si è evoluta al caso multi orbita con nodi distribuiti in uno spazio tridimensionale. Il satellite risulta essere un contenitore di dati che con il suo movimento sono trasportati fino a destinazione. In questo scenario sono possibili scambi di dati tra due satelliti appartenenti ad orbite differenti \textit{(inter-orbitali)} ma non alla stessa orbita \textit{(intra-orbitali)}. Non sono inoltre possibili contatti tra più di due satelliti contemporaneamente, che comporterebbe accessi multipli al canale. Il costo decisamente più contenuto dell'infrastruttura è la motivazione principale di una rete satellitare di questo genere, proposta come alternativa alle soluzioni commercialmente disponibili. 
		
		\section{Orbite e piattaforma satellitare}
		Per meglio comprendere la configurazione della nostra costellazione seguirà un breve approfondimento sulle differenti tipologie di orbita e satellite. 

			\subsection{Classificazione delle orbite}
			La meccanica orbitale di corpi naturali e artificiali è governata dalle tre leggi di Keplero. Comprendendo queste regole è possibile giustificare le caratteristiche dei differenti tipi di orbita usati per i satelliti artificiali. Le leggi sono valide nel caso la massa del corpo orbitante è trascurabile rispetto al corpo centrale e si possono trascurare le interazioni con corpi diversi oltre i due in esame. Queste approssimazioni sono valide nel nostro caso di studio e le leggi sono riformulate dal punto di vista di un satellite artificiale in orbita terrestre.
			\begin{enumerate}
				\item L'orbita di un satellite è un'ellisse con la Terra in uno dei due fuochi.
				\item Il segmento che unisce il centro della Terra con il satellite descrive aree uguali in tempi uguali.
				\item Il quadrato del tempo che il satellite impiega a percorrere l'orbita è proporzionale al cubo della distanza media dalla Terra.
			\end{enumerate}
			
			Intuitivamente la prima legge mostra come un'orbita circolare rappresenti un caso particolare di orbita e  come questo possa produrre comportamenti particolari. La seconda e terza invece legano la distanza dei due corpi a come il tempo di orbita è distribuito e a quanto ammonta, rispettivamente. Il concetto generale è quindi che più un satellite è distante più questo è lento nel procedere sulla sua orbita.
			
			La classificazione orbitale è basata sui seguenti parametri:
			\begin{itemize}
				\item \textbf{Altitudine}, intesa come la distanza verticale di un oggetto da un livello noto (di riferimento), chiamato \textit{livello zero}. Nel nostro caso il riferimento è il livello del mare.
				
				\item \textbf{Eccentricità}, parametro che indica la deviazione di un'orbita dall'essere perfettamente circolare ad avere la forma di una sezione conica. 
				
				\item \textbf{Inclinazione}, angolo tra il piano orbitale e il piano equatoriale del pianeta.
				
				\item \textbf{Corpo centrale}, cioè il pianeta a cui orbita attorno il satellite.
				
				\item \textbf{Sincronia}, possibile corrispondenza tra il periodo di rivoluzione del satellite e il periodo di rotazione del pianeta.
			\end{itemize}

			
			\begin{itemize}

				\item {\bf ALTITUDINE}
					\begin{itemize}
						\item {\bf LEO - Low Earth Orbit}
						: altitudine è compresa tra i 160 km e 2000 km, con orbite di circa 1-2 ore di durata. Ogni satellite copre solo una porzione della superficie terrestre quindi è necessaria una costellazione per assicurare una copertura globale. Per la relativa vicinanza alla superficie le comunicazioni sono a bassa latenza e non è necessaria grande potenza in trasmissione.
						\item {\bf MEO - Medium Earth Orbit}
						: altitudini comprese tra 5000 km e 10000 km, tipicamente usate per i sistemi di posizionamento, osservazione della Terra e più raramente telecomunicazioni. Il periodo orbitale è intorno alle 12 ore. \'E necessario più di un satellite per una copertura globale.				
						\item {\bf GEO - Geostationary Earth Orbit}
						: questo è un particolare tipo di orbita, posta a 35786 km sopra l'equatore, che permette di posizionare il satellite in un punto fisso rispetto alla superficie terrestre. La maggior parte dei satelliti per telecomunicazioni sfrutta questo tipo di orbita che però, data la grande distanza da Terra, soffre di una lunga latenza.
					\end{itemize}
					
				\item{\bf ECCENTRICITÀ}	
					\begin{itemize}
						\item \textbf{Orbita circolare} : particolare caso dell'orbita ellittica, fanno parte di questo gruppo l'orbita GEO e l'orbita di trasferimento di Hoffman, usata per trasferire veicoli spaziali tra orbite diverse. In generale anche le orbite basse fanno parte di questa categoria, sempre con un certo grado di approssimazione.
						\item \textbf{Orbite eccentriche} : alcuni esempi di tale tipo di orbite sono la \textit{Molnya orbit} e la \textit{Tundra orbit}, usate per sistemi di comunicazione e militari.
						Importante notare come queste fruttino la seconda legge di Keplero per soffermarsi per più tempo possibile sopra una specifica zona terrestre. Infatti con una forte eccentricità si ha che il satellite trascorre la maggior parte del tempo nella zona più alta dell'orbita (Apogeo). 								
					\end{itemize}
					
				\item{\bf INCLINAZIONE}	
					\begin{itemize}
						\item \textbf{Orbita polare} : con inclinazione prossima ai 90 gradi, passante quindi per i poli del pianeta.
						\item \textbf{Polare sincrona solare} : permette di passare sopra l'equatore sempre alla stessa ora locale. Utile per sistemi di immagine satellitari.
					\end{itemize}
					
				\item{\bf CORPO CENTRALE}	
					\begin{itemize}
						\item \textbf{Geocentrica} : orbitante attorno alla Terra.
						\item \textbf{Eliocentrica} : orbitante attorno al Sole
						\item \textbf{Aerocentrica} : orbitante attorno a Marte.
					\end{itemize}
				
				
				\item{\bf SINCRONIA}	
					\begin{itemize}
						\item \textbf{Sincrona} : avente periodo orbitale uguale al periodo di rotazione del corpo centrale. Le orbite GEO fanno parte di questo gruppo, detto \textit{Geosynchronous orbit} (GSO).
						\item \textbf{Semi Sincrona} : avente periodo di rotazione pari alla metà del periodo di rotazione del corpo centrale. Ad esempio sistemi di localizzazione in MEO.
					\end{itemize}
			\end{itemize}								
						
			\subsection{Satelliti artificiali}
			Per meglio comprendere il ruolo dei satelliti artificiali nel nostro contesto, verrà riportata una breve introduzione storica e tecnica sull'argomento. L''ipotesi di un satellite posto in orbita dall'uomo sono state fatte a cominciare dall'inizio del ventesimo secolo, con congetture avveniristiche che potevano essere considerate deliranti all'epoca ma del tutto quotidiane nei tempi attuali. Konstantin Tsiolkovsky (1857–1935) nel 1903 pubblicò il primo trattato accademico sull'argomento, introducendo i concetti base di un razzo multistadio e calcolò i parametri base dell'orbita geostazionaria. 
			\begin{figure}[h]
				\centering
				%\vspace{-20pt}
				\includegraphics[scale = 0.5]{./img/potocnik}
				\caption{Da sinistra verso destra: Herman Potočnik (1892–1929), schemi orbita geostazionaria e stazione orbitale, la pubblicazione dove espose le sue idee.}
				\label{fig:poto}
			\end{figure}			
			
			Nel 1928 Herman Potočnik (1892–1929) espose l'idea di una stazione spaziale che permettesse la permanenza umana in orbita, motivando contesti applicativi di ricerca e militari (Figura \ref{fig:poto}). Introdusse inoltre l'idea di un satellite radio in orbita geostazionaria, ma l'intuizione finale di utilizzare questa posizione privilegiata per un ponte radio e comunicazione di massa va attribuita a Arthur C. Clarke (1917–2008) nel 1945. Il primo satellite artificiale è stato lo Sputnik, lanciato nel 1957, segnando l'inizio di un irrefrenabile sviluppo tecnologico del campo che ha portato a diverse e numerose applicazioni, anche del tutto differenti dall'ambito delle telecomunicazioni. 
			
			In seguito un elenco degli attuali principali utilizzi.
			
			\begin{itemize}
				\item {\bf Ricerca}
				
				Per la ricerca un satellite artificiale costituisce un enorme valore per la sua posizione non paragonabile ad una osservatorio terrestre. L'atmosfera ad esempio rappresenta una barriera impenetrabile a molte componenti elettromagnetiche di fondamentale importanza per la comprensione dell'universo. L'esempio classico per questa categoria è il telescopio spaziale Hubble, che produce strabilianti immagini dell'universo nell'infrarosso, visibile e ultravioletto. La Stazione Spaziale Internazionale è un altro esempio di ricerca, anche se definibile maggiormente come appunto una stazione spaziale intesa come avamposto abitato, oltre che un satellite artificiale nel senso stretto del termine.
				
				\item {\bf Comunicazioni}
				
				Il primo satellite adibito a questo scopo fu {\it Echo} 1 lanciato nel 1960, Consisteva semplicemente in un pallone dalla superficie elettromagneticamente riflettente, quindi un sistema completamente passivo. Si passò a satelliti attivi fin dagli immediati successori, {\it Realy 1} e {\it Telstar 1}, entrambi lanciati nel 1962: il primo permise la prima diretta attraverso l'Oceano Pacifico, mentre il secondo attraverso l'Oceano Atlantico. Per il primo satellite geostazionario si deve aspettare però il 1964 con {\it Syncom 3}, disattivato nel 1969. Interessante menzionare che dopo circa 40 di abbandono le perturbazioni orbitali hanno traslato la sua posizione di circa 8 gradi ovest, mostrando come siano necessarie continua correzioni orbitali per mantenere l'orbita prefissata.
				
				\item {\bf Meteorologia}
				
				Forniscono una continua fonte di informazioni in tempo reale di condizioni climatiche come copertura nuvolosa e temperature. Il primo satellite di questo tipo fu lanciato nel 1961, {\it Tiros 1}. Possono occupare tutti i tipi di orbita, in funzione del tipo di missione. Recentemente la NASA ha posto DSCOVR, satellite di ricerca sui cambiamenti climatici, in orbita al punto lagrangiano L1, punto di equilibrio gravitazionale del sistema Terra - Sole.
				
				\item {\bf Posizionamento}
				
				La necessità di un sistema di posizionamento globale è scaturita dall'ambito militare, in generale questi sistemi sono sotto il controllo governativo ma resi disponibili liberamente con caratteristiche tecniche limitate, come ad esempio precisione minore. Il primo sistema fu dichiarato operativo nel 1962 con il lancio di {\it Transit 5A}, e usato attivamente fino al 1996 quando fu definitivamente sostituito dal più prestante sistema GPS, oggi anche integrato in molti dispositivi di comune utilizzo come gli smartphone. Inizialmente sviluppato solamente dagli Stati Uniti, con il passare degli anni ogni grande potenza ha portato avanti il proprio sistema di posizionamento globale. Le costellazioni degli attuali sistemi lavorano su orbite polari MEO, con un periodo orbitale di circa 12 ore, e sono composte da almeno 24 satelliti più altri di riserva. 
				
				\item {\bf Militare}
				
				Lo spazio offre un punto di osservazione sfruttato per operazioni di sorveglianza e raccolta informazioni. Questo settore ha avuto un grosso sviluppo durante la Guerra Fredda con la creazione di sistemi di rilevamento di lanci missilistici e raccolta fotografica del territorio nemico. Nonostante la maggior parte di queste infrastrutture non sono di dominio pubblico, questo settore ha portato grandi benefici nell'ambito civile, come la disponibilità di foto ad alta risoluzione del suolo e monitoraggio di disastri ambientali.
				
			\end{itemize}
			
			Un satellite per telecomunicazioni, il caso di nostro interesse, è di fatto un nodo ripetitore che permette a una o più stazioni terrestri di scambiare informazione. Una stazione di terra trasmette sul satellite alla frequenza di {\it UpLink}, questo riceve ed amplifica il segnale ritrasmettendolo alla frequenza di {\it DownLink} alle stazioni riceventi. Quindi i sistemi di telecomunicazione satellitare sono composti essenzialmente da un'infrastruttura terrestre e il satellite in orbita. L'infrastruttura comprende anche il centro di controllo del satellite, che si occupa di tracciamento, telemetria e controllo. Al contrario di quanto si possa pensare, il tracciamento è uno dei compiti essenziali nella gestione del satellite. Oltre ad essere necessaria per confermare la posizione corretta del satellite dopo il lancio e per permettere il corretto puntamento delle antenne, il tracciamento rimane una priorità costante durante tutta la vita operativa della sonda. Perturbazioni orbitali tendono a scostare il satellite dalla posizione ideale, rendendo anche necessarie periodiche accensioni dei motori di manovra per riposizionarlo. Inoltre, in orbite basse (LEO), è costantemente necessario compensare l'attrito atmosferico che tende a rallentare l'oggetto e di conseguenza contribuire al suo decadimento orbitale. 
			Mediamente, un satellite commerciale in orbita alta, cioè oltre LEO, ha un tempo di vita nell'ordine di una decina d'anni, mentre per uno in orbita bassa (LEO) questo tempo è dimezzato. Con la principale limitazione costituita dalla quantità di propellente a disposizione per le manovre di correzione orbitale e in orbita bassa queste sono molto più frequenti per il costante decadimento menzionato precedentemente. Una volta che il satellite è o sta per essere inservibile, il suo destino dipende dall'orbita in cui è posizionato: in orbite basse decadrà nell'arco di pochi anni distruggendosi nell'atmosfera, in orbite alte invece tenderà a rimanere nel proprio assetto non essendo presente nessuna forza che lo rallenti verso la superficie. Generalmente e quando possibile, il satellite viene spostato in un'orbita cimitero, in modo da non interferire con futuri lanci in quella particolare zona. 
			
			Le comunicazioni satellitari hanno grande vantaggio su grandi distanze, essendo insensibili alla degradazione tipica di ponti radio ad alta frequenza a causa dell'atmosfera e alla dispersione che avviene su cavi.
			I principali {\bf vantaggi} sono: 
			\begin{itemize}
				\item Copertura globale: è possibile cioè portare servizi di alta qualità in ogni angolo del pianeta tramite una costellazione satellitare. 
				\item Capacità: intesa come numero di comunicazioni contemporanee.
				\item Affidabilità: essendo costantemente attivo anche quando le infrastrutture terrestri collassano.
				\item Sicurezza: essendo già di per sé una rete privata, aggiungendo protocolli di sicurezza è possibile ottenere robustezza maggiore dei collegamenti terrestri.
				\item Scalabilità: aggiungere una nuova rete a quella esistente diventa immediato, anche in zone rurali, semplicemente allocando la banda richiesta e installando l'attrezzatura necessaria in loco.
				\item Dispiegamento rapido: al contrario di un'infrastruttura terrestre, il satellite può essere operativo in tempi relativamente rapidi.				
				\item Costi: pur essendo piuttosto elevato l'investimento iniziale della progettazione e costruzione di satelliti, questo si diluisce in un tempo lungo e permette di evitare costi ancora più proibitivi di costruzione e mantenimento di infrastrutture terrestri in ambienti ostili.				
			\end{itemize} 
		
			I principali {\bf svantaggi} invece sono costituiti dai vincoli dimensionali e di peso che impongono limitazioni sull'\textit{hardaware} utilizzabile e di conseguenza sull'energia disponibile, sulla potenza di trasmissione, sui guadagni delle antenne e sulla capacità di calcolo disponibile. Tali fattori dipendono dai parametri orbitali e sull'investimento monetario che si è disposti a sostenere. 
			\begin{itemize}
				\item Potenza: l'unica fonte di energia disponibile a bordo di un satellite sono generalmente i pannelli solari. Durante la guerra fredda era tipico avere anche satelliti ad energia nucleare con a bordo un generatore a radioisotopi, ma, oltre al costo elevato, era presente un alto rischio di contaminazione in caso di lancio fallimentare e nel rientro atmosferico a fine vita operativa.
				La bassa potenza disponibile a bordo è il principale collo di bottiglia per la potenza trasmissiva e quindi la qualità del segnale ricevuto sulla superficie. 
				\item Sensibilità in ricezione: è limitata dalle dimensioni fisiche dell'apparato ricevente, che devono essere contenute in modo da rientrare nelle specifiche di lancio. A terra sono quindi necessarie strutture imponenti e grandi potenze per compensare questa mancanza. 
				\item Disponibilità: fatta eccezione per i satelliti in orbita geosincrona, il restante numero di satelliti pianifica le comunicazioni su base temporale per ogni zona d'interesse, specificando durata e qualità del contatto, essendo questi predicibili deterministicamente.			
			\end{itemize}
			
			
		
		\section{Architettura di rete}	\label{archRete}
		
		La rete proposta è costituita da un gruppo eterogeneo di nodi DTN, ciascuno avente un ruolo preciso nello scambio di dati tra zone rurali e Internet. Lo scheletro è composto da una costellazione di nanosatelliti con caratteristiche descritte nel capitolo \ref{nostrCostell}, corredato da due tipologie di stazioni terrestri adibite alla comunicazione satellitare. 
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 10 5 0 0, scale = 0.5]{./img/dtnscen}
			\caption{Proiezione bidimensionale dell'architettura proposta.}
			\label{fig:dtnscen}
		\end{figure}		
		
		Lo scenario di riferimento illustrato in figura \ref{fig:dtnscen} è basato sulle seguenti tipologie di nodi, disposti secondo l'ordine di invio verso gli utenti rurali:
		
		\begin{itemize}
			\item {\bf Central Node, CN}
			
			Questo nodo svolge la funzione di controllore della rete, gestendo le richieste e instradando i flussi di traffico. Si occupa inoltre dell'interfaccia tra la rete DTN e la rete Internet convenzionale.
			
			\item {\bf HotSpots, HS}
			
			Gli HotSpots sono le stazioni a terra connesse al Central Node. Dispongono quindi di un collegamento radio adibito alla comunicazione con i nanosatelliti e di un collegamento cablato con il CN, Quest'ultimo potrebbe essere attuato anche attraverso la rete Internet convenzionale. 
			
			\item {\bf NanoSatellites, NS}
			
			I nanosatelliti si occupano del trasporto dell'informazione dalle zone rurali alla porzione connessa a Internet e viceversa, memorizzando i dati al loro interno in attesa di entrare in contatto con le stazioni di terra.
			
			\item {\bf ColdSpots, CS}
			
			I CS sono l'analogo degli HS per le zone rurali. Sono localizzati in zone strategiche in prossimità degli utenti finali, e sono collegati con essi tramite una rete locale cablata o wireless. Infine è presente l'interfaccia radio per la comunicazione satellitare.
			
			\item {\bf Rural Nodes, RN}
			
			Sono i veri e propri utenti di questa rete. I nodi rurali sono costituiti da generici dispositivi a cui siamo avvezzi nella nostra quotidianità, come PC, smartphone e tablet. Questi nodi creano le richieste e ricevono le risposte, sono quindi i nodi finali.  
						
		\end{itemize}
		
		Ora che sono stati esposti i vari costituenti della rete, è possibile esporre come una tipica comunicazione avviene in questo contesto, focalizzandosi sugli aspetti relativi alla natura DTN. 
		
		I nodi rurali sono composti da normali utenti che sono interessati ad usufruire di servizi base come la consultazione della propria posta o la visualizzazione di pagine web. Un esempio applicativo è riportato in figura \ref{fig:dnscom} La loro interfaccia con la rete Internet è costituita dal ColdSpot locale. Le richieste vengono inoltrate ad esso e da qui in poi entra in gioco il paradigma DTN. Non esistendo una connessione diretta e stabile con la destinazione il CS trattiene la richiesta dell'utente ed elabora una risposta che emula il comportamento del server a cui l'utente rurale dovrebbe essere connesso, in modo da soddisfare i criteri di timeout tipici di una rete Internet. In questo modo il terminale dell'utente è portato a comportarsi normalmente come se fosse realmente connesso alla destinazione richiesta. Intanto il CS incapsula i dati da inviare in un Bundle DTN e calcola il miglior modo per recapitare i dati ad un HS. Dettagli riguardo a come questa scelta è elaborata saranno investigati nel capitolo \ref{algritmInstrad}. Quindi la richiesta è trattenuta al CS fino all'opportunità di contatto con il nanosatellite prescelto. Una volta che il Bundle DTN in questione raggiunge un HS, da qui è immediatamente inoltrato al nodo centrale, che si occupa di recuperare i dati della richiesta come provenisse da un generico utente su Internet. Segue quindi l'iter standard di un nodo Internet alle prese con il recuperare una pagina web, interrogando prima il DNS, instanziando tutte le connessioni del caso, infine recuperando i dati richiesti. A questo punto è necessario affrontare il percorso verso il nodo rurale e, nuovamente, le scelte di instradamento del dato saranno oggetto del capitolo \ref{algritmInstrad}. I dati recuperati verranno mandati ad un HotSpot il quale, analogamente al ColdSpot in fase di richiesta, tratterà il tutto fino a quando il nanosatellite voluto non entrerà in contatto. Il pacchetto DTN a quel punto sarà caricato sul NS e trasportato lungo l'orbita, dove potrà attraversare, qualora sia opportuno e vantaggioso farlo, un numero indefinito di link tra NS che entrano in contatto tra di loro sempre seguendo una logica di instradamento ben precisa. Infine l'informazione verrà inviata a terra al CS in ricezione della zona rurale di partenza il quale si occuperà di instradarla al nodo di partenza, finalizzando la connessione.
		
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.45]{./img/dnscom}
			\caption{Flusso di traffico durante la navigazione web.}
			\label{fig:dnscom}
		\end{figure}		

		Da questo esempio di comunicazione bidirezionale si può dedurre che i nodi applicanti il paradigma DTN sono gli HotSpots, i Nanosatelliti e i ColdSpots. Questi spezzano le connessioni a livello di trasporto nella logica di evoluzione del TCP splitting esposta nel paragrafo 2.4 e attuano la memorizzazione dei dati descritta nel paragrafo 2.3. Il Central Node è un nodo capace di lavorare al livello del Bundle Protocol, gli altri nodi della rete, come ad esempio i nodi Internet che collegano gli HS al CN, ignorano il BP assimilandolo ad un livello applicativo. 
	
		
		\section{Connessioni alla Rete in aree rurali}
			
		L'accessibilità della conoscenza è diventata una delle pietre miliari del nostro tempo, uno dei simboli più marcati del progresso portato dall'evoluzione impetuosa del settore delle Comunicazioni e delle Tecnologie dell'Informazione (ICT). Questo progresso però si è affermato principalmente nelle aree più sviluppate, andando inoltre a migliorare enormemente le infrastrutture burocratiche e organizzative. Il grande freno nell'affermazione di tali tecnologie in zone più disagiate o rurali è il costo dell'infrastruttura di supporto, che richiederebbe creare da zero una rete in zone dalle condizioni naturali estremamente avverse o dalla situazione politica incerta e disinteressata. Inoltre la scarsa densità abitativa di tali aree non riuscirebbe a giustificare a maggior ragione il dispiegamento di una rete ad alta capacità ed i costi necessari per la sua realizzazione. Esclusi luoghi dalle condizioni naturali estreme, come latitudini polari o atolli oceanici, le restanti zone rurali potrebbero essere caratterizzate inoltre da problemi di emergenza umanitaria ben più gravi della mancanza dell'infrastruttura ICT, ma se posta in questi termini il divario con la civiltà urbana occidentalizzata non potrebbe che aumentare.
		
			\subsection{Motivazione dell'approccio nanosatellitare}			
				
			Questa ricerca punta alla creazione di una rete globale e indipendente, i cui principali vantaggi sono in primo luogo il basso costo, sempre in paragone con le alternative esistenti che propongono servizi comparabili, la scalabilità, essendo che è possibile un dispiegamento graduale delle risorse aggiungendo nuovi nanosatelliti, HotSpots e zone rurali nel caso risultino disponibili finanziamenti successivamente all'istante di attivazione della rete. La robustezza della rete è un'altra conseguenza positiva dovuta alla sua natura distribuita e non centralizzata. La perdita di uno o più nodi non costituisce una criticità per il funzionamento complessivo. 
				
			Altri vantaggi nell'usare una rete satellitare derivano dalla totale indipendenza dalle condizioni e vicissitudini superficiali, quindi la rete è immune a disastri naturali e difficilmente soggetta a sabotaggi e censure politiche.
			
			L'alternativa proposta da questo lavoro di ricerca è chiamata "Ring Road" \cite{burleigh2011toward} e non è altro che l'infrastruttura esposta nel capitolo \ref{archRete}.
				
			\subsection{Altri approcci al problema}
			
			\begin{itemize}
				\item {\bf Digital Gangetic Plains \cite{raman2007experiences}}
				
				Questo progetto consiste nel coprire una vasta area di territorio con una rete WiFi 802.11. I vantaggi di questa tecnologia è che non ha costi proibitivi, occupa una porzione libera nello spettro di frequenze e offre alte velocità di connessione. La rete è composta da una serie di ripetitori WiFi atti a creare una rete {\it mesh}, cioè una rete connessa a grafo. Il nodo principale ha accesso alla rete Internet cablata e rappresenta il punto d'accesso. I ponti radio possono essere distanti decine di kilometri e sono collegati da antenne direzionali ad alto guadagno. 
				
				\item {\bf DakNet \cite{hasson2003daknet}}
				
				Questa soluzione coinvolge l'utilizzo di infrastrutture esistenti per il trasporto fisico dei dati, nello specifico mezzi pubblici come autobus. Il veicolo diventa la spola, similmente al nanosatellite del nostro caso, tra la zona rurale ed il punto di accesso ad Internet. Muovendosi lungo il suo percorso programmato, il mezzo prende in carico le richieste da parte degli utenti sparsi per i villaggi e una volta arrivato in contatto con il punto di accesso recupera tutti i dati per consegnarli al passaggio successivo. Il cuore pulsante a bordo del bus è un PC Linux embedded e comunicazione WiFi. 
				
				\item {\bf KioskNet \cite{seth2006low}}
				
				Il termine {\it kiosk} è traducibile come "chiosco" ma prende l'accezione specifica di una sorta di internet caffè, utilizzabile a pagamento per l'accesso pubblico a Internet. Questo genere di attività è fiorente in molte zone rurali, ma soffre di problemi legati all'infrastruttura fatiscente che lo supporta, cominciando dall'energia elettrica per finire alla connessione telematica. Lo scopo quindi è stato quello di semplificare la tecnologia già supportante questo servizio per contenere costi e manutenzione tramite l'utilizzo di PC embedded a basso consumo, in modo da poter essere indipendenti energeticamente tramite l'utilizzo di pannelli solari, adottando infine un paradigma DTN con idea simile al DakNet per quanto riguarda il a riutilizzo dei sistemi di trasporto esistenti.
								
			\end{itemize}
			
			Il limite di tutte queste proposte è l'affrontare il problema con un approccio locale, a rischio di fattori ambientali e politici instabili. 
		
		\subsection{Alternative commerciali}
		Mantenere una copertura Internet globale non è semplice. Con una costellazione di satelliti in GEO è possibile mantenere una connessione persistente con un puntamento fisso. Inoltre la costellazione può essere composta da un numero minore di satelliti rispetto a quelli necessari in orbita LEO, vista la più estesa impronta a terra dovuta dalla maggiore altitudine.
		D'altra parte però altezze più elevate comportano costi di lancio e posizionamento maggiori, infatti un satellite in questa orbita generalmente richiede un investimento intorno ai 300 milioni di dollari. Infine, le zone polari non sono coperte per la posizione equatoriale dell'orbita GEO e le latenze sono alte a causa delle grandi distanze in gioco.
		
		Le costellazioni LEO sono invece in grado di mantenere una copertura globale sostituendosi a vicenda nella copertura durante il loro costante movimento, rendendo necessarie però antenne a puntamento automatico per ottenere velocità di trasferimento comparabili a quelle dei satelliti GEO. Immaginando l'antenna del satellite puntata in direzione del suolo, ci si rende conto come la massima qualità di ricezione, ottenibile quando le due antenne, suolo e satellite, sono allineate, possa durare al massimo qualche istante. Lo svantaggio della minor banda viene compensato da una latenza decisamente minore. L'investimento si abbassa anch'esso ma rimane comunque alto (intorno ai 150 - 200 milioni di dollari), tenendo a mente che sono necessari più satelliti.
		
		%%Calcolo che non comprendo appieno onestamente
		Per confronto, vengono riportati alcuni esempi di tariffe commerciali (2009):
		\begin{itemize}
			\item {\it ORBCOMM}: servizio tipicamente utilizzato per brevi messaggi, propone 1000 caratteri a 1.40\$ (1433.60\$ per MB) \cite{orbcomm}.
			\item {\it Iridium}: offre diversi piani con un costo variabile a seconda delle proprie esigenze. Ad esempio il piano Combo A prevede 69\$ mensili e 13.8\$ per MB, mentre il piano Combo F prevede 1499\$ al mese e 1.10\$ per MB \cite{iridium}.
			\item {\it INMARSAT}: usa una costellazione di tre satelliti GEO offrendo una tariffa di 7.50\$ per MB \cite{inmarsat}.
		\end{itemize}
		%%Verificare un secondo questi dati
		Occorre far notare che questi servizi sono usufruibili tramite un modulo di collegamento personale delle dimensioni paragonabile a quelle di un portatile. Ogni compagnia menzionata usa una propria tecnologia non compatibile con le altre. I dettagli implementativi del livello radio e hardware della nostra soluzione non sono ancora stati definiti e non è compito di questo lavoro di tesi definirli, ma allo stato attuale la direzione implementativa non è quella di un oggetto personale che ha il compito di interfacciare il proprio PC, ad esempio, con la rete nanosatellitare, ma piuttosto una base condivisa ad una zona, idealizzabile come una comunità o un villaggio, dove l'utenza si reca per usufruire del servizio offerto. Questa scelta si pone in relazione con il tipo di contesto e utenza per cui questa rete è sviluppata. 
		
		Altro importante punto da sottolineare è il tipo di esperienza d'uso che consegue da una rete DTN, sostanzialmente diversa da quella a cui siamo comunemente abituati con la rete Internet. Ad esempio nella navigazione Internet la richiesta di una pagina e la sua ricezione possono passare minuti, anche qualche decina. 
		
		Tutto questo si pone in linea con le alternatine di rete rurale proposte, mentre è incomparabile con i servizi commerciali menzionati, i quali offrono un'esperienza d'uso comparabile ad una rete convenzionale a velocità limitata. Nel contesto in cui la nostra soluzione si pone, i limiti menzionati possono essere accettabili, essendo che lo scopo non è rendere disponibile una rete Internet paragonabile a quella convenzionale in ogni angolo del pianeta, ma piuttosto rendere disponibile Internet a zone e comunità che altrimenti non avrebbero possibilità di accedervi.
		
		Riassumendo, l'uso di nanosatelliti permetterebbe di evitare tutti gli svantaggi di una rete terrestre pur essendo più economica di una rete satellitare GEO o LEO. 
		
		\subsection{La nostra costellazione} \label{nostrCostell}
		La costellazione di satelliti scelta per questo lavoro è in orbita LEO, che a confronto con un'orbita GEO offre il vantaggio di investimenti iniziali e latenze minori, ma ha il principale svantaggio che i satelliti sono in costante movimento rispetto alla superficie e quindi l'apparato di terra deve essere in grado di orientare l'antenna per poter ricevere correttamente i dati. Questa configurazione non permette, in termini di qualità del segnale, prestazioni ottimali per tutta la durata del contatto. Inoltre un singolo satellite in orbita GEO costituisce un punto di criticità in caso di malfunzionamento rispetto ad una costellazione sparsa in orbita LEO. Questi compromessi però sono tutti a vantaggio del requisito principale di questo lavoro, ridurre i costi d'investimento per la creazione di una rete DTN in grado di estendere la copertura Internet a zone rurali. Una costellazione in orbita GEO rimane preferita in ambito di telecomunicazioni, ma comporta costi estremamente elevati. Sempre in quest'ottica è stata fatta la scelta del tipo di satellite, il nanosatellite.
		
		I nanosatelliti sono una realtà piuttosto recente, spesso utilizzati come piattaforme di test per nuove tecnologie o come piattaforma orbitale congiunta di università per esperimenti o rilevamenti nello spazio. Le loro peculiarità sono le dimensioni estremamente ridotte e standardizzate, nell'ordine delle decine di centimetri per lato, e il basso costo di progettazione, produzione e mantenimento. Eliminando completamente caratteristiche come un propulsore, pannelli solari orientabili, antenne ad alto guadagno, sistemi ridondanti, ecc... si possono ridurre notevolmente dimensioni e costi. In particolare i costi di messa in orbita sono notevolmente abbattuti in quanto possono essere aggregati ad altri lanci come carichi secondari. Infine alcuni sono lanciati insieme al rifornimento periodico alla Stazione Spaziale Internazionale (ISS) e da essa dispiegati in orbita tramite un apposito lanciatore. 
		Una soluzione pratica è costituita dai CubeSat, un tipo standardizzato di nanosatellite in termini di volume e peso. Nello specifico, l'unità base del CubeSat è un parallelepipedo 10x10x11.35 cm, con un peso massimo di 1.33Kg, pensata per mettere a disposizione un litro di volume all'interno. Le unità base possono essere combinate per ottenere CubeSat più capienti. La standardizzazione, come per altro in ogni ambito ingegneristico, permette di abbattere ulteriormente i costi di lancio e progettazione, non essendo necessario sviluppare una piattaforma \textit{ad hoc} per ogni nanosatellite, semplificando inoltre le interazioni tra i gruppi che si occupano del lancio e della costruzione del nanosatellite.
		
		Il principale vantaggio nell'uso dei nanosatelliti è il costo di investimento decisamente abbattuto. Il costo di assembleaggio stimato si aggira intorno ai 50000\$ - 100000\$, mentre il costo di lancio stimato di tre CubeSat è all'incirca di 200000\$. Il costo totale, approssimativo, di una rete composta da 150 nanosatelliti e 3000 stazioni di terra si può stimare essere all'incirca di 33 milioni di dollari, con una vita operativa stimata di 5 anni. Con una velocità di trasmissione di 24 Mbps, il volume totale scambiato sarebbe di 225 TB, per un costo al MB di 0.13\$. Se questa cifra viene confrontata con quelle riportate nella sezione precedente si percepisce una netta differenza.
		
		I parametri orbitali scelti si rifanno alla costellazione Iridium \cite{fossa1998overview}. I nanosatelliti sono distribuiti su piani orbitali inclinati di $86.4\,^{\circ}$. Il numero di orbite è un parametro di simulazione su cui è possibile agire. Le orbite vengono spaziate differenziando l'angolo RAAN (Right Ascension of the Ascending Node) cioè i piani orbitali sono ruotati rispetto all'asse terrestre, mantenendo però la stessa inclinazione rispetto all'equatore. I nanosatelliti sono distribuiti nelle orbite in numero uniforme, come anche è uniforme la loro disposizione sull'orbita. 
		
		
	\chapter{Source Contact Graph Routing}
	
		\section{Introduzione}
		Per instradamento, in inglese {\it routing}, si intende il calcolo del percorso con cui i dati verranno trasferiti dalla sorgente alla destinazione.
		
		Durante il lavoro di tesi è stato sviluppato ed implementato un protocollo di routing chiamato Source Contact Graph Routing (SCGR), traducibile come instradamento a sorgente su grafo di contatti. SCGR è un'estensione del concetto di CGR proposto da Burleigh et al. \cite{burleigh2010contact} che trae vantaggio dal fatto che le missioni spaziali sono minuziosamente pianificate ed il movimento dei satelliti è predicibile. I vari nodi possono essere quindi a conoscenza di un futuro stato della rete. Non si rende necessario un dialogo tra nodi prima di confermare il prossimo salto, ma piuttosto la conoscenza dello stato della rete permette di creare un grafo di contatti, inteso come un modello variante nel tempo di connettività tra nodi, sul quale è possibile applicare l'algoritmo euristico proposto per trovare il miglior percorso. Con algoritmo euristico si intende un algoritmo in grado di trovare una soluzione prossima all'ottimale, un compromesso necessario per limitare i tempi di calcolo necessari per una soluzione ottima. Sviluppata dalla NASA, questa idea permette maggiore flessibilità e resilienza della rete spaziale, permettendo di semplificare e ridurre i costi di gestione della missione.
		
		L'iniziale soluzione applicata alla rete DTN nanosatellitare per l'instradamento seguiva la logica CGR, dove ogni nodo conteneva le informazioni di contatto della rete e decideva ogni hop successivo sfruttando le opportunità di contatto. L'alternativa proposta da questo lavoro invece sposta la decisione dell'intero percorso del bundle nel momento in cui questo viene generato. Il principale vantaggio consiste che all'origine si può ancora avere una visione d'insieme completa, non essendo condizionati nelle scelte di instradamento precedenti. Da qui l'aggiunta di "Source" a CGR, essendo un instradamento deciso dalla sorgente. 
		
		\section{Predizione dei contatti e Contact Table}
		%Spiegazione contact table e la sua logica di compilazione
		Predire la posizione di un corpo in orbita è molto complesso a causa delle perturbazioni orbitali. Tra queste ricordiamo la non-sfericità terrestre, l'attrito atmosferico, il campo gravitazionale irregolare, il vento solare, l'attrazione di altri corpi celesti come Luna e Sole, una non perfetta modellazione della spinta del motore \cite{gilmore2009predicting}. Esistono diversi algoritmi, di diversa complessità, come ad esempio SPG4 proposto in \cite{gilmore2009predicting} che permettono un'accuratezza di circa 1km considerando che la soluzione diverge più si spinge la predizione nel futuro. Tuttavia, nell'interesse di questa ricerca abbiamo deciso di non soffermarci sulla precisione assoluta della posizione del satellite, ma piuttosto abbiamo focalizzato la nostra attenzione sugli aspetti relativi all'instradamento dei dati. Certo, in un contesto applicativo pratico sarebbe necessario di migliorare la precisione di queste informazioni, ma allora occorrerebbe considerare anche tecniche aggiuntive, come ad esempio il tracciamento da una stazione di terra, per migliorare i risultati delle simulazioni. Nel contesto di simulare una rete reale e di avere quindi la necessità di conoscere un generico comportamento della costellazione dal punto di vista dei contatti possibili tra nanosatelliti in orbita e tra nanosatelliti e stazioni di terra, sono state ignorate le perturbazioni orbitali sopramenzionate e si è scelto di fare riferimento ad un modello semplicistico della costellazione con orbite circolari. 
		
		In seguito a queste decisioni è stato sviluppato un algoritmo in modo indipendente che potesse svolgere questo compito. Prima di esporlo è necessario definire il concetto di contatto e quantificare le sue dimensioni. Importante tenere a mente che contatti multipli, vale a dire tra più di due nodi contemporaneamente, non sono ammessi e ignorati. Anche la gestione dell'accesso multiplo al canale satellitare va al di là dello scopo di questo lavoro di tesi e  fa parte degli sviluppi futuri.

		Ogni 10ms, un campionamento del tempo di simulazione deciso empiricamente e giudicato sufficientemente accurato, le posizioni di tutti i nodi vengono aggiornate avanzando lungo il loro moto naturale. Ad ogni passo è calcolata la distanza Euclidea tra ogni coppia di nodi e verificata se inferiore a determinate soglie prefissate.		
		
		Come parametro per definire l'inizio e la dine di una contatto è stata scelta la distanza. Un nanosatellite ed una stazione di terra sono in contatto quando la distanza tra loro è minore di 600 km. Invece due nanosatelliti sono in contatto tra loro quando la distanza che li separa è minore di 500 km.

		Essendo che nella durata di una simulazione possono verificarsi migliaia di contatti anche coinvolgendo la stessa coppia di nodi, è necessario che per ogni contatto sia riportato il tempo di inizio e il tempo di fine per poterlo distinguere univocamente. 
		
		Ogni contatto porta con

		I risultati vengono quindi raccolti e salvati in un file di testo chiamato Contact Table, esempio in tabella \ref{tab:ctorig}.
		
		%Esempio di contact table e spiagazione dei vari campi
		\begin{table}
			\begin{center}
				\begin{tabular}{| c | c | c |}
					\hline
					In contatto con & Tempo inizio (ms) & Tempo fine (ms) \\
					\hline
					10.0.0.53 & 2161460 & 2248500 \\
					50.0.0.22 & 2328230 & 2396780 \\
					10.0.0.63 & 3846820 & 3953110 \\
					10.0.0.64 & 4100830 & 4209000 \\
					10.0.0.16 & 4668750 & 4722990 \\
					10.0.0.65 & 4794460 & 4895300 \\
					50.0.0.22 & 5028230 & 5096780 \\
					10.0.0.9 & 6960070 & 7054830 \\
					10.0.0.49 & 7221920 & 7299840 \\
					10.0.0.53 & 7573630 & 7672310 \\
					\hline
				\end{tabular}
			\caption{Esempio di Contact Table in relativa al nanosatellite \textbf{10.0.0.39}. I tempi sono in riferimento all'inizio della simulazione, notare la quantizzazione di 10ms. Essendo questo esempio prodotto dalla simulazione implementata della rete, per questione di comodità di sviluppo gli indirizzi dei nodi non sono canonici EID come prescritto dallo standard DTN ma indirizzi IP.}
			\label{tab:ctorig}
			\end{center}			
		\end{table}


		\section{Concetti di una rete deterministica} \label{concDet}

		%%vantaggi di una rete deterministica in termini di gestione e ottimizzazione
		La Contact Table rappresenta la conseguenza diretta di una rete deterministica come la nostra, dove per ogni istante del tempo di simulazione è definita la topologia della rete e sulla quale possono essere fatte scelte decisionali a priori. Questa peculiarità permette di poter avere una visione di insieme dello stato della rete e di tenere traccia delle conseguenze delle scelte fatte in tempo reale. In altre parole è possibile aggiornare la conoscenza futura dello stato della rete in funzione delle decisioni prese allo stato attuale. Un esempio pratico di questo concetto è stato introdotto dal presente lavoro di Tesi, offrendo interessanti possibilità di sviluppo futuro. 
		
		Immaginando i contatti come punti noti nel tempo, si pensi di allegare a questi una serie di informazioni riguardanti i nodi coinvolti. Un esempio di informazione in particolare, l'unica attualmente implementata e testata, è la quantità di dati trasferibile tra i due nodi nel contatto (Tabella \ref{tab:ctmod}). Questo dato è di fondamentale importanza nella pianificazione dell'instradamento perché costituisce un limite fisico della rete: non tenere conto di questa limitazione porterebbe inevitabilmente ad un conflitto tra quanto pianificato e quanto succederebbe realmente. 
		Prendiamo come esempio la necessità di trasferire un pacchetto dal nodo A al nodo B. Questi estremi sono dati come input all'algoritmo di instradamento, che restituisce un elenco \textbf{ordinato} di contatti da poter sfruttare per costruire il percorso completo tra sorgente e destinazione. Se questo percorso viene confermato, allora sappiamo, ancora prima che il bundle effettivamente parta, che la banda disponibile dei contatti coinvolti nel trasferimento sarà sfruttata per la trasmissione del bundle in questione. Risulta quindi necessario sottrarre la dimensione del pacchetto dalla quantità di dati trasferibile per ogni contatto coinvolto. In questo modo, se un contatto risulta particolarmente gettonato, si evita di eccedere la sua capacità di trasferimento {\bf a priori}.
		
		\begin{table}[h]
			\begin{center}
				\begin{tabular}{| c | c | c | c | c |}
					\hline
					In contatto con & Tempo inizio (ms) & Tempo fine (ms) & Byte scambiabili & Byte disponibili\\
					\hline
					10.0.0.53 & 2161460 & 2248500 & 5488046 & 1458945\\
					50.0.0.22 & 2328230 & 2396780 & 4322214 & 2930287\\
					10.0.0.63 & 3846820 & 3953110 & 6701797 & 2309\\
					10.0.0.64 & 4100830 & 4209000 & 6820334 & 6820334\\
					10.0.0.16 & 4668750 & 4722990 & 3419940 & 3451005\\
					10.0.0.65 & 4794460 & 4895300 & 6358163 & 70043\\
					50.0.0.22 & 5028230 & 5096780 & 4322214 & 732010\\
					10.0.0.9  & 6960070 & 7054830 & 5974807 & 1295837\\
					10.0.0.49 & 7221920 & 7299840 & 4913011 & 278\\
					10.0.0.53 & 7573630 & 7672310 & 6221971 & 3340923\\
					\hline
				\end{tabular}
				\caption{Contact Table proposta in precedenza (\ref{tab:ctorig}) con l'aggiunta delle modifiche proposte. La quantità di dati scambiabili è direttamente dipendente ai parametri di simulazione scelti, descritti nel capitolo \ref{scenSim}. L'ultima colonna propone quantità verosimili di dati ancora allocabili per quel particolare contatto. }
				\label{tab:ctmod}
			\end{center}			
		\end{table}		
		
		I vantaggi di questo genere di pianificazione stanno nella possibilità di prevedere ed evitare congestioni direttamente alla sorgente, evitando il verificarsi del problema piuttosto che affrontarlo {\bf a posteriori}. Non si rendono più necessari inoltre scambi di informazioni tra nodi per decidere sul momento che azione intraprendere, come anche non risulta necessario aggiornarli sulla topologia della rete, riducendo allo stesso tempo {\it overhead} di servizio, consumo di energia e onere computazionale a carico dei nodi DTN. Il nodo DTN deve quindi solamente seguire le istruzioni fornitegli, agendo senza prendere decisioni ulteriori.
		
		Rimane solo da chiarire come l'informazione di instradamento venga consegnata ai nodi intermedi. La soluzione scelta prevede di inserire tali informazioni nell'{\it header} DTN modificandolo opportunamente (fare riferimento alla figura \ref{routingheader}), tale modifica prevede l'aggiunta di un campo chiamato \emph{N Hops}, che indica il numero di salti necessari per raggiungere la destinazione, e nell'aggiunta di una serie di $N$ campi, inseriti secondo l'ordine di attraversamento, indicanti le due informazioni necessarie per identificare un contatto, indirizzo del nodo e tempo di inizio. Si ha quindi a che fare con un {\it header} a lunghezza variabile.
		
		\begin{figure}[!h]
			\centering
			
			\begin{bytefield}[bitwidth=0.5em]{64}						
				\bitheader{0, 8, 16, 24, 32, 40, 48, 56, 64} \\
				\bitbox{8}{N Hops} \\
				
				\begin{rightwordgroup}{Paths \\ hops}
					\bitbox{32}{Contact Start 1} & \bitbox{32}{Next Hop EID 1} \\
					\bitbox{32}{Contact Start 2} & \bitbox{32}{Next Hop EID 2} \\
					\wordbox[]{1}{$\vdots$} \\[1ex]
					\bitbox{32}{Contact Start $N$} & \bitbox{32}{Next Hop EID $N$}
				\end{rightwordgroup}			
			\end{bytefield}
			
			\caption{Campi aggiunti all'header DTN per supportare il routing si sorgente.}
			\label{routingheader}
		\end{figure}
		
		Altra importante precisazione riguarda quali nodi della nostra rete DTN sono addetti alla creazione dei Bundle DTN e di conseguenza al calcolo a sorgente del loro instradamento. \`E necessario distinguere due flussi di traffico: dagli utenti rurali al Nodo Centrale e dal Nodo Centrale verso gli utenti rurali. Essendo il Nodo Centrale l'interfaccia di tutta la rete DTN con la rete Internet, esso risulta essere la sorgente per tutti i Bundle diretti verso gli utenti rurali. Diversa invece la situazione per il traffico in direzione inversa, dove è il ColdSpot l'interfaccia tra l'utente rurale e Internet. Sono quindi quest'ultimi a generare i Bundle diretti verso il nodo centrale. La rete DTN è confinata dal Nodo Centrale da un lato, connesso poi a Internet, e dai ColdSpot dall'altro, connessi ai rispettivi nodi rurali. Nodo Centrale e ColdSpot sono quindi gli unici nodi a poter creare e decidere l'instradamento dei Bundle DTN. Tuttavia, non esistendo un collegamento diretto tra nodo centrale e ColdSpot, non risulta possibile mantenere aggiornati i dati relativi all'uso dei contatti, cioè l'aggiornamento conseguente alla creazione di un bundle DTN al Nodo Centrale non può essere riportata in tempi brevi e senza spreco di risorse sui database di tutti i ColdSpot della DTN e viceversa. In questo lavoro di tesi si è deciso di testare l'algoritmo proposto considerando solo flussi di traffico destinati alle zone rurali. In questo modo l'unico che dovrà effettuare il calcolo dei percorsi sarà il Nodo Centrale.
		% IMMAGINE/SCHEMA CON I DUE FLUSSI
		

		\section{Algoritmo di instradamento} \label{algritmInstrad}
		
		Per calcolare il percorso alla sorgente, sono necessarie diverse informazioni, riassunte in  \ref{strutDati}. Tali informazioni sono contenute nella Contact Table, la quale contiene un elenco dei contatti che avverranno durante l'intera durata della simulazione ordinati cronologicamente. L'unità base di tutta la struttura dati è il {\bf Contatto}, che contiene tutte le informazioni che lo riguardano. La serie di salti che dovrà compiere il bundle invece è contenuta in una struttura di tipo {\bf Percorso}, che è costituita da una serie di {\bf Contatti} ordinati cronologicamente. 
		
		I dati necessari da fornire in ingresso all'algoritmo sono i seguenti:
		\begin{itemize}
			\item {\bf Contact Table}
			\item {\bf Indirizzo di destinazione}
			\item {\bf TOV} (Time Of Validity), indica il limite temporale entro il quale il bundle deve arrivare a destinazione. Oltre questo limite i dati perdono significato e possono essere scartati. 
			\item {\bf SOB} (Size Of Bundle) indica la dimensione del bundle in byte ed è necessario per verificare che questa non ecceda la capacità di trasferimento rimanente del contatto.
		\end{itemize}
		
		Il dato che ci si aspetta in uscita è invece una struttura di tipo {\bf Percorso}, contenente tutti i contatti che dovrà sfruttare il bundle per arrivare a destinazione.
		
		\vspace{10pt}
		\begin{algorithm}
			\caption{Strutture dati.}
			\SetKwInput{sob}{SOB}
			\SetKwInput{tov}{TOV}
			\SetKwInput{percorso}{Percorso}
			\SetKwInput{contatto}{Contatto}
			\SetKwInput{percorsi}{TuttiPercorsi}
			
			\sob{Size Of Bundle, la dimensione in byte del Bundle.}
			\tov{Time Of Validity, tempo massimo entro cui il Bundle deve essere consegnato a destinazione.}
			\percorso{Struttura dati contenente una serie di contatti.}
			\contatto{Struttura dati contenente il tempo di inizio e l'indirizzo del nodo con cui si è in contatto.}
			%\indirizzo{}
			\percorsi{Struttura dati contenente tutti i percorsi validi trovati.}
			
			\caption{Strutture dati.}
			\label{strutDati}
		\end{algorithm}

		Entrando nel dettaglio, l'algoritmo in questione può considerarsi un derivato della forma ricorsiva di una tipologia denominata {\bf DFS}, utilizzata per la ricerca nelle struttura ad albero o a grafo. {\bf DFS} è l'acronimo di {\it Depth-First Search}, cioè ricerca con priorità della profondità. Le strutture ad albero sono costituite da una serie di nodi che si diramano da un nodo radice verso i nodi foglia, i più esterni. Una ricerca DFS parte dalla prima diramazione del nodo radice prendendo poi tutte le prime diramazioni e arrivando ad un nodo foglia. A questo punto è quindi necessario arretrare di un nodo, dal nodo foglia al nodo precedente, e si passa a prendere in considerazione la seconda diramazione. Iterativamente, una volta finite le diramazioni foglia, si passa alla seconda diramazione di due nodi precedenti, e così via. La natura di questo procedimento è intrinsecamente ricorsiva, infatti si può immaginare che appena si sceglie un ramo e ci si sposti al prossimo nodo ci si ritrovi esattamente nella situazione precedente, al nodo radice di un sotto albero. Questo tipo di ricerca si contrappone alla ricerca in ampiezza BFS ({\it Breadth-First Search}) che non passa al livello successivo finché tutti i nodi dello stesso livello non sono stati esaminati, quindi nel procedere nell'esplorazione del grafo non indietreggia mai al nodo precedente. 
		% Inserire esempio di albero
		
		Questo piccolo approfondimento è utile per capire come è possibile ricondurre il nostro problema alla ricerca in una struttura ad albero, i nodi di quest'ultimo infatti possono essere considerati i nodi della nostra rete e la loro disposizione relativa determinata dai contatti. Considerando il flusso di traffico diretto ai nodi rurali, immaginiamo di porre come nodo radice il ColdSpot della zona rurale di destinazione. Sarebbe inutile porre in questa ricerca il nodo rurale di destinazione perché qualunque percorso avrebbe comunque il ColdSpot destinazione come hop finale. A questo punto la prima schiera di rami è costituita dai contatti del ColdSpot e iterativamente si può costruire l'intera struttura di nodi, considerando ogni volta i contatti del nodo per creare il livello successivo. I nodi foglia invece sono gli HotSpot, dove il processo iterativo si ferma, avendo creato con successo un possibile percorso tra HotSpot e ColdSpot, e di conseguenza un percorso tra il Nodo Centrale e l'utente rurale. I nodi intermedi sono quindi costituiti da nanosatelliti. Una regola fondamentale da riportare nella costruzione dell'albero è la coerenza temporale nel considerare i contatti. In primo luogo sarebbe inutile prendere in considerazione contatti già terminati, inoltre è opportuno sfruttare contatti in corso di svolgimento solo a livello di nodo foglia, o HotSpot, che ricordiamo essere il nostro punto di partenza. Considerare di sfruttare un contatto in corso di svolgimento tra due nanosatelliti, ad esempio, sottintende la necessità di far arrivare i dati ad uno dei due in tempo reale, quindi una situazione non possibile. Non sarebbe utile considerare contatti con tempo di fine oltre il {\bf TOV}. Senza questo limite la struttura potrebbe diventare potenzialmente infinita. Per quanto riguarda i nodi intermedi invece non è possibile considerare contatti con tempo di fine maggiore del tempo di inizio del contatto precedente, in altre parole non è possibile tenere in considerazione contatti che avvengono precedentemente al contatto selezionato per il precedente salto, essendo ormai troppo tardi per passare i dati al nodo successivo. Il percorso quindi viene generato partendo dalla destinazione e ponderando tutte le diverse possibilità per arrivare ad un HotSpot.
		
		\'E importante distinguere una struttura ad albero da una struttura a grafo. In quest'ultima i nodi sono interconnessi tra di loro senza regole precise e anche con connessioni multiple, visto che è possibile che due nodi entrino in contatto più di una volta. Non siamo interessati ad una struttura di questo tipo perché renderebbe estremamente difficile tenere traccia della disposizione temporale dei contatti, premessa fondamentale per costruire un percorso ordinato temporalmente. La struttura ad albero proposta invece assicura una contiguità temporale grazie alle regole di costruzione introdotte. Interessante notare anche come un algoritmo BFS non farebbe al caso nostro in quanto non crea una connessione tra nodo radice e nodo foglia.
		
		
		\begin{algorithm}
			\SetStartEndCondition{ (}{)}{)}\SetAlgoBlockMarkers{}{\}}
			\SetKwProg{Fn}{}{\{}{}\SetKwFunction{FRecurs}{void FnRecursive}
			\SetKwFor{For}{for}{\{}{}
			\SetKwIF{If}{ElseIf}{Else}{if}{\{}{else if}{else\{}{}
			\SetKwFor{While}{while}{\{}{}
			\SetKwRepeat{Repeat}{repeat\{}{until}
			\AlgoDisplayBlockMarkers\SetAlgoNoLine
			\newcommand{\forcond}{$i=0$ \KwTo $n$}
			\SetKwFunction{FRecurs}{SCGR}
			
			\textbf{Indirizzo} NodoSelezionato = \textbf{Indirizzo} CSdestinazone;

			IstanteConsiderato = \textbf{TOV};

			\textbf{TuttiIPercorsi} = \textit{vuoto};

			\textbf{Percorso} finoAQui  = \textit{vuoto};			
			
			\Fn{\FRecurs{{\bf Indirizzo} NodoSelezionato, {\bf Percorso} finoAQui,  istanteConsiderato}}{
				
				\For{Ogni contatto del nodo considerato da adesso fino all'istanteConsiderato}
				{
					{\bf Percorso} nuovoPercorso = finoAQui;
					
					\If{Se il contatto è compatibile con le specifiche}
					{
						nuovoPercorso.aggiungi(contatto selezionato);
						
						\If{Se il nodo in contatto è un HotSpot}
						{
							{\bf TuttiPercorsi}.aggiungi(nuovoPercorso);
						}
						\ElseIf{Se il nodo in contatto è un nanosatellite}
						{
							SCGR({\bf Indirizzo} del nodo in contatto, nuovoPercorso, istante inizio contatto);
						}
					}
				}
			}
		
		\caption{Algoritmo SCGR scritto in pseudocodice.}
		\label{scgr}		
		\end{algorithm}
		
		
		Alla prima iterazione il parametro destinazione contiene l'indirizzo del ColdSpot della zona rurale dove il nodo destinazione è localizzato({\it riga 1}), mentre il {\bf Percorso finoAQui} è vuoto. Quest'ultima struttura tiene traccia del percorso fatto durante le varie iterazioni, agendo come una sorta di {\bf stack}, permettendo quindi di aggiungere e rimuovere i contatti solo dal fondo ({\it riga 4}). 
		
		Il corpo è di fatto un {\bf for} ({\it riga 6}) che ad ogni ciclo prende in esame un contatto diverso del nodo selezionato, in ordine temporale. Dall'istante attuale fino al {\bf TOV}. Quindi una nuova struttura viene inizializzata({\it riga 7}), \textbf{nuovoPercorso}, usata per tenere traccia del contatto aggiunto in questo ciclo del {\bf for}. Il suo contenuto sarà il percorso fatto fino ad adesso con in fondo uno dei contatti del nodo selezionato in questa chiamata della funzione. Se il contatto preso in esame viene considerato valido dalla verifica {\bf if} successiva ({\it riga 8}), esso verrà aggiunto come ulteriore contatto inun nuovo percorso. Questa verifica considera la compatibilità del contatto con le caratteristiche del bundle, come ad esempio la sua dimensione ({\bf SOB}), e mette in pratica le politiche di instradamento scelte. In questo lavoro, questa verifica se la capacità trasmissiva rimasta nel contatto è compatibile con la dimensione del bundle. Logiche più complesse saranno poi proposte nel capitolo finale dedicato agli sviluppi futuri, con particolare attenzione alla congestione dei nodi. Se un contatto non è considerato valido si passa semplicemente al successivo, altrimenti si aggiunge al \textbf{nuovoPercorso} che si sta creando ({\it riga 9}). A questo punto rimane da capire se con questo contatto appena aggiunto si è arrivati a trovare un percorso valido o è necessario ripetere il processo iterativamente. Il flusso si biforca quindi al blocco {\bf if - else} di {\it riga 10} che aggiunge il \textbf{nuovoPercorso} all'insieme di {\bf TuttiPercorsi} validi nel caso il contatto sotto esame sia un HotSpot, altrimenti ({\bf else}) ({\it riga 13}), richiama ricorsivamente questa funzione. Particolare attenzione va dedicata a quali parametri riceve la chiamata ricorsiva. L'indirizzo che viene passato è quello con cui il nodo selezionato è in contatto, perché ci si è idealmente spostati di nodo nell'albero. Questo diventa nodo radice del sotto albero e quindi la nuova destinazione. La strada invece dalla nuova radice dell'albero alla radice originale (il ColdSpot) è contenuta nel \textbf{nuovoPercorso}, che diventa il {\bf finoAQui} della nuova chiamata ricorsiva. Infine il \textbf{istanteConsiderato} diventa l'istante di inizio del contatto che collega i due nodi, in modo che i dati riescano ad arrivare in tempo alla destinazione finale. 
		
		L'algoritmo quindi trova una moltitudine di possibili percorsi che a fine computazione, cioè quando tutti i possibili contatti validi al ColdSpot sono stati presi in considerazione, sono contenuti nella struttura {\bf TuttiPercorsi}. Notare come selezionando i contatti alla destinazione tra il tempo attuale e il {\bf TOV} possa anche produrre un insieme vuoto se il tempo massimo di consegna è troppo stringente, diventando impossibile trovare una catena di contatti validi fino ad un HotSpot. Questo può succedere per limiti fisici temporali, oppure perché i contatti che potevano essere sfruttati erano già saturi di bundle da trasferire, quindi privi di banda disponibile. Nel caso in cui un gruppo di percorsi sia effettivamente trovato, c'è la necessità di decidere quale di questi verrà effettivamente confermato e inserito nell'header del bundle DTN. La scelta prevede di selezionare il percorso che porterà il bundle a destinazione nel minor tempo possibile.
		
		Dopo che un percorso è stato scelto, una routine finale si occupa di aggiornare la Contact Table con il consumo di banda dato dal passagio del bundle per i vari contatti.

		
	\chapter{Risultati simulazione e analisi delle prestazioni}
		
		\section{Simulatore}
		Per investigare il comportamento della rete si è scelto il simulatore di rete ns-3. 
		ns-3 è un simulatore ad eventi discreti, vale a dire che il sistema è rappresentato, nella sua evoluzione nel tempo, con variabili che cambiano istantaneamente il loro valore in ben definiti istanti di tempo. L'avanzamento di quest'ultimo salta da un evento ad un altro, ignorando i periodi di inattività. \'E un potente strumento analizzare la progettazione di protocolli e interazioni tra gli stessi. Rappresenta una grande opportunità per la ricerca permettendo di studiare il comportamento di reti reali dai costi proibitivi o non immediatamente realizzabili, come ad esempio la nostra rete DTN. Altre ragioni per usare ns-3 sono la possibilità di avere un comportamento riproducibile e sfruttare i modelli di rete disponibili per impararne il funzionamento. Nato dalle ceneri di ns-2, si è posto dal principio lo scopo generale di essere {\it open-source}, estensibile e mirato alla ricerca e all'insegnamento.  Esistono molti simulatori di rete alternativi, esporremo qui alcune caratteristiche che distinguono ns-3 dagli altri strumenti.
		
		\begin{itemize}
			\item ns-3 è progettato come un{\bf set di librerie} che possono essere combinate tra loro e con altre librerie esterne. Mentre altre piattaforme forniscono una singola interfaccia utente usata per portare avanti ogni tipo di lavoro, ns-3 permette di poter usare diversi strumenti di visualizzazione e analisi di dati esterni
			
			\item Anche se principalmente usato su piattaforme Linux, esiste il supporto per FreeDSB e Cygwin per macchine Windows. Supporto nativo per Visual Studio è stato rilasciato in forma sperimentale. 
		\end{itemize}
		
		Lo sviluppo del simulatore è diviso in gruppi differenti, ma le linee guida seguenti sono valide in generale con lo scopo di produrre uno strumento di successo.
		\begin{itemize}
			\item {\bf Compatibilità}, essendo il codice basato largamente su simulatori esistenti, come ns-2, GTNetS e altri
			\item {\bf Scalabilità}, mentre ns-2 era un simulatore sequenziale con una singola esecuzione su un singolo processore, ns-3 può essere utilizzato per simulazioni distribuite e parallele. 
		\end{itemize}

		Infine un riassunto delle linee guida su cui il team di progetto si fa strada.
		
		\begin{itemize}
			\item {\bf Orientato agli oggetti.} Un simulatore di rete con lo scopo di essere usato dalla comunità di ricerca deve essere facilmente estensibile per includere nuovi protocolli, modifiche degli attuali esistenti o nuovi tipi di instradamento. Per questo gli sviluppatori hanno deciso di portare avanti la scelta già intrapresa con ns-2 di creare una gerarchia di classi C++.
			
			\item {\bf Realismo.} Il progetto del simulatore deve permettere di avvicinarsi molto al comportamento di reti reali. Ad esempio oggetti rappresentati gli applicativi dovrebbero interagire con i protocolli di livello quattro in modo simile a quelli reali.
			
			\item {\bf Efficienza di memoria.} Il simulatore supporta sia flussi {\it data-less} che flussi {\it data-full}. In altre parole è possibile risparmiare memoria essendo che molto spesso i dati trasportati non hanno significato nel contesto di simulazione e possono essere astratti via.
			
			\item {\bf Output configurabile.} Anche per andare incontro ad esigenze di simulazioni di grande portata, i dati da raccogliere sono altamente configurabili a seconda delle esigenze.
			
			\item {\bf Statistiche.} Il simulatore include strumenti per creare grafici ed estrapolare dati, in modo da aiutare la caratterizzazione dei risultati di simulazione.
		\end{itemize}
		
		\section{Simulazione della rete} \label{simRete}
		Lo scopo quindi è quello di modellare la nostra rete sul simulatore, cercando di evitare il più possibile discrepanze con la teoria esposta. Purtroppo però per alcune limitazioni operative di ns-3 per quanto riguarda le comunicazioni satellitare e le reti DTN, si è dovuti andare incontro ad alcune approssimazioni per non pesare troppo sulla semplicità e sui tempi di sviluppo. L'elenco seguente raccoglie tutte caratteristiche progettuali adottate per ricostruire la nostra architettura di rete sul simulatore. 
		
		\begin{itemize}
			\item I collegamenti tra HotSpot e Nodo Centrale e anche i collegamenti tra ColdSpot e nodi rurali sono implementati tramite i moduli Ethernet e TCP/IP di ns-3.
			
			\item Siccome che i collegamenti satellitari e relativi protocolli specializzati (LTP) non sono ancora stati implementati in ns-3, il collegamento radio è stato approssimato con una rete WiFi. Definendo le interfacce dei nanosatelliti e delle basi di terra con impostazioni particolari è possibile permettere la trasmissione di bundle su distanze molto maggiori delle normali reti WiFi. Il livello di rete invece è un normale IP. Per quanto riguarda il livello di trasporto invece si è sopperiti alla mancanza del Licklider Transmission Protocol (LTP) con il modulo UDP. Per emulare il meccanismo di ritrasmissione LTP, mancante per natura nell'UDP, lo si è implementato a livello applicativo nel bundle DTN. L'accoppiata quindi di UDP e ACK fornito dal Bundle Layer si comporta similmente all'LTP, dove il mittente mantiene una copia dei bundle inviati fintanto che non riceve una risposta positiva dal destinatario di avvenuta ricezione. 
			
			\item Per creare una comunicazione radio bidirezionale è stato necessario definire due interfacce radio per ogni nodo wireless, una in {\it Downlink} e una in {\it Uplink}. Questo sebbene ns-3 contenesse un modulo CSMA full-duplex, essendo che si aveva bisogno di un WiFi full-duplex. La soluzione quindi è stata di dotare i nodi con due distinte interfacce Wifi dalle stesse caratteristiche fisiche. Ad esempio un HotSpot mandando un dato ad un nanosatellite userà l'interfaccia di {\it Uplink}, questo riceverà i dati tramite l'interfaccia di {\it Uplink} ma risponderà tramite l'interfaccia di {\it Downlink}. Infine l'HotSpot riceverà la risposta tramite l'interfaccia di {\it Downlink}.
		
			\item L'header DTN è piuttosto diverso da quello canonico, in primo luogo per la parte di SCGR introdotta in \ref{concDet}, in generale semplificato di tutte le parti non necessarie per le simulazioni, minimizzando l'impatto di {\it overhead}.
			
			\vspace{25pt}
			\begin{bytefield}[bitwidth=0.5em]{64}
				\bitheader{0, 8, 16, 24, 32, 40, 48, 56, 64} \\
				\bitbox{32}{Destination EID}  & \bitbox{32}{Source EID} \\
				\bitbox{32}{Sequence Number} & \bitbox{32}{Payload Size} \\
				\bitbox{32}{Source Timestamp} & \bitbox{8}{Type} & \bitbox{8}{N Hops} \\
				
				\begin{rightwordgroup}{Paths \\ hops}
					\bitbox{32}{Contact Start 1} & \bitbox{32}{Next Hop EID 1} \\
					\bitbox{32}{Contact Start 2} & \bitbox{32}{Next Hop EID 2} \\
					\wordbox[]{1}{$\vdots$} \\[1ex]
					\bitbox{32}{Contact Start $N$} & \bitbox{32}{Next Hop EID $N$}
				\end{rightwordgroup}
				
			\end{bytefield}
			\vspace{25pt}
			
			Nel dettaglio, i primi due campi contengono una stringa che identifica destinazione e sorgente. Il Sequance Number differenzia ogni bundle generato con un numero univoco. Il Payload Size indica la quantità di dati trasportati, espressi in byte. Source Timestamp contiene l'istante in cui il bundle è stato generato. Il campo Type al momento è definito per tre valori diversi: 
			\begin{itemize}
				\item {\bf 0} Data bundle, trasporta dati
				\item {\bf 1} ACK bundle, conferma di avvenuta ricezione
				\item {\bf 2} Status bundle, generiche informazioni di servizio
			\end{itemize}
			
			Quindi se un bundle dati arriva ad un nodo DTN questo è seguito da un bundle ACK nella direzione opposta per comunicare l'avvenuta ricezione. Questo bundle porta lo stesso Sequence Number del bundle dati che l'ha generato. Per implementare questo meccanismo ogni nodo tiene una lista dei socket in trasmissione attivi, un socket per ogni bundle. Ogni socket attivo ha un timeout, se allo scadere di questo non viene ricevuto l'ack il bundle viene inviato nuovamente, altrimenti si elimina il socket dalla lista. 
				
		\end{itemize}
			
		\section{Scenari di simulazione} \label{scenSim}
		%i diversi scenari spiegati e motivati
		Gli scenari sono la caratterizzazione di una specifica simulazione in termini di quantità di nodi e la loro disposizione. Per ragioni pratiche di tempi simulazione e capacità di calcolo si mantiene il numero dei nodi nell'ordine delle decine.
		
		\begin{itemize}
			\item {\bf Scenario UNO:} 8 HotSpot, 24 nanosatelliti, 16 ColdSpot
			\item {\bf Scenario DUE:} 16 HotSpot, 24 nanosatelliti, 32 ColdSpot
			\item {\bf Scenario TRE:} 8 HotSpot, 42 nanosatelliti, 16 ColdSpot
		\end{itemize}
		
		Scenario UNO è il riferimento per gli altri due scenari, dove scenario DUE studia le prestazioni per un aumento delle stazioni di terra, mentre scenario TRE aumenta il numero di nanosatelliti in orbita. In questo modo è possibile indagare quale tipologia di nodi ha un impatto maggiore sulle prestazioni della rete.
		
		\begin{figure}[!b]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.5]{./img/8hs}
			\caption{Scenario UNO.}
			\label{fig:8hs}
		\end{figure}	
		
		\begin{figure}[!h]
			\centering
			%\vspace{-20pt}
			\includegraphics[scale = 0.5]{./img/16hs}
			\caption{Scenario UNO.}
			\label{fig:16hs}
		\end{figure}			
		
		Quindi scenario UNO e DUE condividono la stessa costellazione di 24 nanosatelliti equamente distribuiti su 4 piani orbitali. Le figure \ref{fig:8hs} e \ref{fig:16hs} mostrano le differenti disposizioni sul pianeta delle stazioni di terra. Notare come gli HotSpot sono posizionati in zone raggiunte da Internet e invece i ColdSpot sono disseminati in zone desertiche, parchi naturali, isole e insediamenti remoti. 
		Lo scenario TRE invece propone una differente costellazione, con 42 nanosatelliti distribuiti su 6 piani orbitali. Le stazioni di terra sono nelle stesse posizioni dello scenario UNO.
		
		Tutti e tre gli scenari sono descritti dai seguenti parametri che rimangono invariati. Le orbite hanno un raggio di 6652655 metri, i satelliti quindi orbitano a 281655 metri dal suolo. Ogni nanosatellite è un CubeSat con una massa di 1.33Kg. Con questi parametri si ottengono periodi orbitali di circa 90 minuti.
		
		Le interfacce sono di tipo WiFi 802.11b a 2.4 GHz, la velocità di trasmissione è di 63052 Bps. I protocolli superiori sono quelli esposti nel capitolo \ref{simRete}.
														
		\section{Risultati}
		%tabelle e grafici con i risultati
		In modo da fornire un termine di paragone di riferimento per i dati raccolti con algoritmo di instradamento SCGR, si sono simulati gli stessi scenari e flussi con una scelta di instradamento statica. In pratica ad ogni zona rurale di destinazione è associato in modo statico un HotSpot che inoltra i dati al primo nanosatellite disponibile. Questo nanosatellite mantiene i dati fintanto che non si trovava in contatto con la zona rurale di destinazione. Ci si riferirà a questo termine di paragone con il termine {\bf "Static"}, contrapposto a {\bf "SCGR"}.
		
		Per quanto riguarda i flussi di traffico simulati su questi scenari si è stabilito uno schema composto da cinque flussi di traffico. La denominazione {\bf RN} sta per Rural Node e la distinzione tra flussi fa riferimento alla diversa quantità di nodi rurali di destinazione. I cinque diversi flussi sono: {\bf 1RN, 2RN, 4RN, 8RN, 16RN}. Per ogni nodo rurale partono 1000 bundle che trasporta 50Kb di dati, generati uno al secondo a partire dal dall'istante zero di simulazione. Questa trama punta a farci capire come i differenti scenari reagiscono a intensità di traffico crescenti. Essendo che la disposizione disomogenea delle zone rurali presenta una differente esposizione al traffico satellitare, la scelta dei nodi di destinazione è stata fatta in seguito ad uno studio della Contact Table in termini di quantità di contatti con i nanosatelliti per ogni zona rurale. Un numero di contatti maggiore implica possibilità di consegna più disparate e un flusso di dati più sostenuto. Sono stati quindi scelte destinazioni mediamente trafficate, in modo da non influenzare i risultati con scelte vantaggiose o svantaggiose. In uno stesso scenario e flusso, le simulazioni SCGR e Static condividono le stesse destinazioni rurali.
		
		I tempi proposti nei grafici sono il risultato di una media complessiva del tempo di consegna di tutti i bundle inviati nella simulazione. Per tempo di consegna si intende il lasso di tempo da quando il bundle è stato creato a quando questo raggiunge la destinazione. Essendo questi risultati frutto di simulazioni su scenari ridotti rispetto a quelli necessari per una rete reale, non sono di interesse i valori assoluti dei tempi di consegna ma piuttosto il loro valore relativo.
		
		I grafici \ref{fig:scenuno}, \ref{fig:scendue}, \ref{fig:scentre} mostrano il principale risultato di questo lavoro, in ogni circostanza l'algoritmo SCGR mostra prestazioni migliori rispetto ad una scelta statica. La tabella \ref{tab:gain} mostra in percentuale l'incremento prestazionale. I risultati dello Static hanno bisogno di un ulteriore commento non mostrando degli andamenti regolari e a volte in controtendenza con quanti ci si potrebbe aspettare, come nel grafico \ref{fig:scendue}. Le prestazioni della scelta statica sono fortemente dipendenti a come sono associati HotSpot e zone rurali, quindi alcuni andamenti irregolari sono possono essere giustificati da una combinazione non ottimale. In generale l'aumento dei flussi di traffico è ben assorbito dall'algoritmo SCGR, negli scenari DUE e TRE l'aumento dei tempi di consegna è appena percettibile, mentre lo scenario meno denso (UNO) comincia a saturarsi nei flussi più intensi.
		
		Infine i grafici \ref{fig:scgr} e \ref{fig:static} mettono in paragone le prestazioni dei differenti scenari. Per quanto riguarda la scelta statica si può dedurre che il numero di satelliti aumentato dallo scenario UNO allo scenario TRE non fa grossa differenza, non potendo sfruttare scambi di dati in orbita. Opposta invece la situazione per quanto riguarda l'algoritmo SCGR, dove il maggior numero di nanosatelliti dello scenario TRE offre molte più alternative di instradamento rispetto allo scenario UNO. Le prestazioni migliori si ottengono invece con lo scenario DUE, dove il maggior numero di HotSpot a disposizione permette di creare un percorso con meno salti tra nodi accorciando i tempi di consegna. 
		
		\begin{table}
			\begin{center}
				\begin{tabular}{| c | c | c | c |}
					\hline
					Scenario & UNO & DUE & TRE \\ \hline
					1RN & 58\% & 87\% & 74\% \\ \hline
					2RN & 65\% & 85\% & 75\% \\ \hline
					4RN & 63\% & 84\% & 74\% \\ \hline
					8RN & 59\% & 81\% & 69\% \\ \hline
					16N & 57\% & 80\% & 69\% \\
					\hline					
				\end{tabular}
				\caption{Incrementi prestazionali dell'algoritmo SCGR rispetto a Static.}
				\label{tab:gain}
			\end{center}			
		\end{table}
		
		\begin{figure}[h]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 0 0 0 50, scale = 0.8]{./img/scenuno}
			\caption{Scenario UNO.}
			\label{fig:scenuno}
		\end{figure}			
		
		\begin{figure}[t]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 0 0 0 50, scale = 0.8]{./img/scendue}
			\caption{Scenario DUE.}
			\label{fig:scendue}
		\end{figure}	
		
		\begin{figure}[b]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 0 0 0 50, scale = 0.8]{./img/scentre}
			\caption{Scenario TRE.}
			\label{fig:scentre}
		\end{figure}	
		
		\begin{figure}[t]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 0 0 0 50, scale = 0.8]{./img/scgr}
			\caption{Prestazioni dei differenti scenari con algoritmo SCGR.}
			\label{fig:scgr}
		\end{figure}	
		
		\begin{figure}[b]
			\centering
			%\vspace{-20pt}
			\includegraphics[clip=true, trim = 0 0 0 45, scale = 0.8]{./img/static}
			\caption{Prestazioni dei differenti scenari con algoritmo Static.}
			\label{fig:static}
		\end{figure}			
		
	
	\chapter{Conclusione e sviluppi futuri}
	%riassunto dei risultati e idee future di sviluppo
	%contatti multipli e ponti radio
	%gestione delle scelte di routing in modo dinamico
	Partendo dallo scopo di creare una rete globale capace di fornire servizi Internet ad utenti in zone rurali si è arrivati a definire un rete DTN nanosatellitare in grado di superare la mancanza di un collegamento persistente tra sorgente e destinazione. I nanosatelliti scelti si rifanno allo standard CubeSat, consentendo un dispiego della rete a costi ridotti e in tempi di sviluppo relativamente brevi. Si è poi ragionato sulla possibilità di predire in modo deterministico l'evoluzione della topologia della rete creando un registro adatto per tenere traccia dei contatti tra nodi, la Contact Table. 
	Infine il contributo dato da questo lavoro di tesi si è incentrato sullo sfruttare le informazioni fornite dalla Contact Table per produrre un algoritmo di instradamento deterministico, applicato alla sorgente. Il prodotto di questo lavoro è chiamato SCGR, {\it Source Contact Graph Routing}, e rappresenta un'evoluzione marcata del concetto proposto in \cite{burleigh2010contact}.
	
	Le future indagini in questo ambito di ricerca sono molteplici, ma molti di questi possono essere integrati nella logica di lavoro introdotta da questa tesi senza particolare sforzo. Due esempi dei limiti della rete non modellati al momento sono l'occupazione di memoria e l'energia disponibili hai nodi, con particolare attenzione ai nanosatelliti che per natura non dispongono di risorse considerevoli. Entrambi questi valori possono essere gestiti in modo simile alla banda rimanente dei contatti, vale a dire aggiornati alla sorgente e tenuti in considerazione mentre l'algoritmo SCGR ha bisogno di sapere se un contatto può essere ritenuto valido. In pratica oltre a controllare se il contatto dispone ancora di sufficiente banda si controllerà anche se il buffer sul nanosatellite ha abbastanza memoria o se l'energia disponibile è sufficiente per trasmettere, dando ad esempio un peso energetico ad ogni operazione. Se tutte le verifiche vanno a buon fine, si potrà confermare il trasferimento in quel contatto e in seguito aggiornare tutte le strutture tenendo conto di quel trasferimento.

	Tutto questo sarebbe da integrare con il flusso opposto a quello indagato in questo lavoro, dai nodi rurali al Nodo Centrale.
	
	In questo ambito inoltre potrebbe essere utile integrare un sistema di QoS, {\it Quality of Service},  che gestisca priorità ed eviti a priori saturazioni dei nodi. La scelta ad esempio di scegliere il percorso più veloce potrebbe essere rimpiazzata da un algoritmo che scelga il percorso in modo da distribuire in modo bilanciato il carico su tutte le risorse della rete. 
	
	Infine c'è la necessità di introdurre un meccanismo che sappia reagire di fronte agli imprevisti, come ad esempio un canale disturbato che non permette di fruttare la capacità di trasferimento del contatto come previsto. Questo genere di casualità rappresenta un punto di debolezza del sistema SCGR andando a minare la base concettuale di una rete deterministica e c'è la necessità di studiare una soluzione concreta.
	
	Altro sviluppo da indagare, a lato del sistema SCGR, è la possibilità di avere contatti multipli, che in primo luogo aumenterebbero le opportunità di contatto e infine aprirebbero alla possibilità a ponti radio capaci di trasferimenti immediati, anche se solo tra nanosatelliti, questa possibilità combinata alla natura DTN della rete potrebbe risultare in miglioramenti prestazionali non indifferenti, soprattutto negli scenari più densi di nodi.
	
	
	\bibliography{references}
	
\end{document}
